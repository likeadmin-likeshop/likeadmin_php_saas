import{R as J,N as M,O as Z,B as Q,A as W,g as X,C as Y,F as ee,G as te,H as ae,I as oe,J as le}from"./element-plus-D_drhFLK.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-CJUmABp7.js";import{f as se,b as ie}from"./index-DxY3wdBO.js";import{d as P,r as T,s as de,Z as L,an as re,o as s,c as V,V as t,M as a,u as o,U as me,aa as pe,L as r,ab as ue,S as m,a as D,O as v,i as ce,R as _e,n as N}from"./@vue-TMcuEboY.js";import{c as fe,e as ye,f as ve}from"./dict-WzdV1Bpq.js";import{u as ge}from"./usePaging-DFi_nJOG.js";import{_ as be}from"./edit.vue_vue_type_script_setup_true_lang-DTC-YRvx.js";import{u as ke}from"./vue-router-CZY6S6gL.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-DE_336rM.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";import"./index-CVrOEkfW.js";const Ce={class:"dict-type"},we={class:"mt-4"},Ve={class:"flex justify-end mt-4"},De=P({name:"dictData"}),dt=P({...De,setup(Ee){const{query:S}=ke(),g=T(!1),_=de(),i=L({type:"",type_id:Number(S.id),name:"",status:""}),C=L({dict_type:[]}),{pager:f,getLists:y,resetPage:E,resetParams:U}=ge({fetchFun:ve,params:i}),w=T([]),I=n=>{w.value=n.map(({id:e})=>e)},K=async()=>{var e,p;g.value=!0,await N();const n=C.dict_type.find(u=>u.id==i.type_id);(e=_.value)==null||e.setFormData({type_value:n==null?void 0:n.type,type_id:n.id}),(p=_.value)==null||p.open("add")},O=async n=>{var e,p;g.value=!0,await N(),(e=_.value)==null||e.open("edit"),(p=_.value)==null||p.setFormData(n)},x=async n=>{await se.confirm("确定要删除？"),await fe({id:n}),y()},h=async()=>{const n=await ye({page_type:0});C.dict_type=n.lists};return y(),h(),(n,e)=>{const p=J,u=M,$=Z,b=Q,q=W,c=X,A=Y,R=ee,B=ie,d=te,F=ae,H=oe,j=ne,k=re("perms"),z=le;return s(),V("div",Ce,[t(R,{class:"!border-none",shadow:"never"},{default:a(()=>[t(p,{class:"mb-4",content:"数据管理",onBack:e[0]||(e[0]=l=>n.$router.back())}),t(A,{ref:"formRef",class:"mb-[-16px]",model:o(i),inline:""},{default:a(()=>[t(b,{label:"字典名称"},{default:a(()=>[t($,{class:"w-[280px]",modelValue:o(i).type_id,"onUpdate:modelValue":e[1]||(e[1]=l=>o(i).type_id=l),onChange:o(y)},{default:a(()=>[(s(!0),V(me,null,pe(o(C).dict_type,l=>(s(),r(u,{label:l.name,value:l.id,key:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),t(b,{label:"数据名称"},{default:a(()=>[t(q,{class:"w-[280px]",modelValue:o(i).name,"onUpdate:modelValue":e[2]||(e[2]=l=>o(i).name=l),clearable:"",onKeyup:ue(o(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(b,{label:"数据状态"},{default:a(()=>[t($,{class:"w-[280px]",modelValue:o(i).status,"onUpdate:modelValue":e[3]||(e[3]=l=>o(i).status=l)},{default:a(()=>[t(u,{label:"全部",value:""}),t(u,{label:"正常",value:1}),t(u,{label:"停用",value:0})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(c,{type:"primary",onClick:o(E)},{default:a(()=>e[7]||(e[7]=[m("查询")])),_:1},8,["onClick"]),t(c,{onClick:o(U)},{default:a(()=>e[8]||(e[8]=[m("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(R,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[D("div",null,[v((s(),r(c,{type:"primary",onClick:K},{icon:a(()=>[t(B,{name:"el-icon-Plus"})]),default:a(()=>[e[9]||(e[9]=m(" 添加数据 "))]),_:1})),[[k,["setting.dict.dict_data/add"]]]),v((s(),r(c,{disabled:!o(w).length,type:"danger",onClick:e[4]||(e[4]=l=>x(o(w)))},{icon:a(()=>[t(B,{name:"el-icon-Delete"})]),default:a(()=>[e[10]||(e[10]=m(" 删除 "))]),_:1},8,["disabled"])),[[k,["setting.dict.dict_data/delete"]]])]),v((s(),V("div",we,[D("div",null,[t(H,{data:o(f).lists,size:"large",onSelectionChange:I},{default:a(()=>[t(d,{type:"selection",width:"55"}),t(d,{label:"ID",prop:"id"}),t(d,{label:"数据名称",prop:"name","min-width":"120"}),t(d,{label:"数据值",prop:"value","min-width":"120"}),t(d,{label:"状态"},{default:a(({row:l})=>[l.status==1?(s(),r(F,{key:0},{default:a(()=>e[11]||(e[11]=[m("正常")])),_:1})):(s(),r(F,{key:1,type:"danger"},{default:a(()=>e[12]||(e[12]=[m("停用")])),_:1}))]),_:1}),t(d,{label:"备注",prop:"remark","min-width":"120","show-tooltip-when-overflow":""}),t(d,{label:"排序",prop:"sort"}),t(d,{label:"操作",width:"120",fixed:"right"},{default:a(({row:l})=>[v((s(),r(c,{link:"",type:"primary",onClick:G=>O(l)},{default:a(()=>e[13]||(e[13]=[m(" 编辑 ")])),_:2},1032,["onClick"])),[[k,["setting.dict.dict_data/edit"]]]),v((s(),r(c,{link:"",type:"danger",onClick:G=>x(l.id)},{default:a(()=>e[14]||(e[14]=[m(" 删除 ")])),_:2},1032,["onClick"])),[[k,["setting.dict.dict_data/delete"]]])]),_:1})]),_:1},8,["data"])]),D("div",Ve,[t(j,{modelValue:o(f),"onUpdate:modelValue":e[5]||(e[5]=l=>ce(f)?f.value=l:null),onChange:o(y)},null,8,["modelValue","onChange"])])])),[[z,o(f).loading]])]),_:1}),o(g)?(s(),r(be,{key:0,ref_key:"editRef",ref:_,onSuccess:o(y),onClose:e[6]||(e[6]=l=>g.value=!1)},null,8,["onSuccess"])):_e("",!0)])}}});export{dt as default};
