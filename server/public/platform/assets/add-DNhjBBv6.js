import{a as L,B as M,A as q,L as I,M as N,g as D,C as S,h as T,E as z}from"./element-plus-CSiqOtzA.js";import{_ as G}from"./picker-CrueE0_N.js";import{c as H}from"./consumer-Ct-DHQt0.js";import{u as j}from"./useLockFn-BhPLnZje.js";import{d as J,r as b,s as K,o as O,L as P,M as t,V as l,u as a,a as u,S as m,i as Q}from"./@vue-TMcuEboY.js";import{d as W}from"./index-VCXt8Qva.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./index-DmpJxzQZ.js";import"./index-Zje0SqnC.js";import"./index.vue_vue_type_script_setup_true_lang-ggB8NA6X.js";import"./index-DqngIaDj.js";import"./@vueuse-DE_336rM.js";import"./usePaging-DFi_nJOG.js";import"./vue3-video-play-xg7gp0Bu.js";import"./vuedraggable-OYPBN08G.js";import"./vue-CHxGqOme.js";import"./sortablejs-DdgKbxid.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-CZY6S6gL.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";const X=J({__name:"add",emits:["refresh"],setup(Y,{expose:x,emit:w}){const n=b(!1),f=K(),_=b(!1),o=b({avatar:"",create_time:"",name:"",sn:"",id:"",disable:0,tel:"",tactics:0,domain_alias:"",domain_alias_enable:1,notes:"",account:"",password:"",password_confirm:""}),v={name:[{required:!0,message:"请输入租户名称",trigger:["blur"]}],disable:[{required:!0,message:"请选择租户状态",trigger:["blur"]}],tactics:[{required:!0,message:"请选择分表策略",trigger:["blur"]}]},g=w,y=()=>{_.value=!1,n.value=!0},U=d=>{_.value&&d(),L.confirm("表单未提交，确认退出编辑吗？").then(()=>{d()}).catch(()=>{})},k=()=>{var d;(d=f.value)==null||d.resetFields()},E=async()=>{var d;if(await((d=f.value)==null?void 0:d.validate()),o.value.password!==o.value.password_confirm)return z.error("两次密码输入不一致");await H(o.value),_.value=!0,n.value=!1,g("refresh")},{isLock:C,lockFn:c}=j(E);return x({openHandle:y}),(d,e)=>{const B=G,s=M,i=q,p=I,V=N,R=D,F=S,A=T;return O(),P(A,{modelValue:a(n),"onUpdate:modelValue":e[11]||(e[11]=r=>Q(n)?n.value=r:null),title:"新增租户",direction:"rtl",size:"50%","destroy-on-close":!0,"before-close":U,onClose:k},{default:t(()=>[l(F,{ref_key:"formRef",ref:f,class:"ls-form","label-position":"right",model:a(o),rules:v,"label-width":"100px"},{default:t(()=>[e[20]||(e[20]=u("div",{class:"form_header"},"基础信息",-1)),l(s,{label:"头像：",prop:"avatar"},{default:t(()=>[l(B,{modelValue:a(o).avatar,"onUpdate:modelValue":e[0]||(e[0]=r=>a(o).avatar=r),limit:1},null,8,["modelValue"])]),_:1}),l(s,{label:"租户名称：",prop:"name"},{default:t(()=>[l(i,{modelValue:a(o).name,"onUpdate:modelValue":e[1]||(e[1]=r=>a(o).name=r),placeholder:"请输入租户名称",style:{width:"280px"}},null,8,["modelValue"])]),_:1}),l(s,{label:"租户状态：",prop:"disable"},{default:t(()=>[l(V,{modelValue:a(o).disable,"onUpdate:modelValue":e[2]||(e[2]=r=>a(o).disable=r)},{default:t(()=>[l(p,{value:0},{default:t(()=>e[12]||(e[12]=[m("开启")])),_:1}),l(p,{value:1},{default:t(()=>e[13]||(e[13]=[m("关闭")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"联系方式：",prop:"tel"},{default:t(()=>[l(i,{modelValue:a(o).tel,"onUpdate:modelValue":e[3]||(e[3]=r=>a(o).tel=r),maxlength:30,placeholder:"请输入联系方式",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),l(s,{label:"分表策略：",prop:"tactics"},{default:t(()=>[l(V,{modelValue:a(o).tactics,"onUpdate:modelValue":e[4]||(e[4]=r=>a(o).tactics=r)},{default:t(()=>[l(p,{value:0},{default:t(()=>e[14]||(e[14]=[m("公表模式")])),_:1}),l(p,{value:1},{default:t(()=>e[15]||(e[15]=[m("分表模式")])),_:1})]),_:1},8,["modelValue"])]),_:1}),l(s,{label:"域名别名：",prop:"domain_alias"},{default:t(()=>[l(i,{modelValue:a(o).domain_alias,"onUpdate:modelValue":e[5]||(e[5]=r=>a(o).domain_alias=r),placeholder:"请输入域名别名",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),l(s,{label:"启用别名：",prop:"domain_alias_enable"},{default:t(()=>[u("div",null,[l(V,{modelValue:a(o).domain_alias_enable,"onUpdate:modelValue":e[6]||(e[6]=r=>a(o).domain_alias_enable=r)},{default:t(()=>[l(p,{value:0},{default:t(()=>e[16]||(e[16]=[m("启用")])),_:1}),l(p,{value:1},{default:t(()=>e[17]||(e[17]=[m("禁用")])),_:1})]),_:1},8,["modelValue"]),e[18]||(e[18]=u("p",{class:"text-info text-sm"}," Tips：项目线上部署后，配置好域名别名并解析到默认域名后启用即可生效 ",-1))])]),_:1}),l(s,{label:"租户备注：",prop:"notes"},{default:t(()=>[l(i,{modelValue:a(o).notes,"onUpdate:modelValue":e[7]||(e[7]=r=>a(o).notes=r),placeholder:"请输入租户备注",style:{"max-width":"250px"},type:"textarea",maxlength:100},null,8,["modelValue"])]),_:1}),e[21]||(e[21]=u("div",{class:"form_header"},[m(" 账号信息 "),u("span",{class:"text-xs font-normal text-info opacity-70"}," （不填则生成默认账号，账号默认为sn编码，密码默认123456） ")],-1)),l(s,{label:"管理员账号：",prop:"account"},{default:t(()=>[l(i,{modelValue:a(o).account,"onUpdate:modelValue":e[8]||(e[8]=r=>a(o).account=r),placeholder:"请输入管理员账号",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),l(s,{label:"密码：",prop:"password"},{default:t(()=>[l(i,{modelValue:a(o).password,"onUpdate:modelValue":e[9]||(e[9]=r=>a(o).password=r),type:"password",placeholder:"请输入密码",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),l(s,{label:"确认密码：",prop:"password_confirm"},{default:t(()=>[l(i,{modelValue:a(o).password_confirm,"onUpdate:modelValue":e[10]||(e[10]=r=>a(o).password_confirm=r),type:"password",placeholder:"请再次输入密码",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),l(s,null,{default:t(()=>[l(R,{type:"primary",loading:a(C),onClick:a(c)},{default:t(()=>e[19]||(e[19]=[m("提交")])),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Ge=W(X,[["__scopeId","data-v-10ea8076"]]);export{Ge as default};
