import{F as L,G as N,B as S,L as T,M as U,A as M,C as O,g as G,O as $}from"./element-plus-CSiqOtzA.js";import{_ as j}from"./index-BswGZwl2.js";import{l as z}from"./lodash-BtPWuHkK.js";import{n as A,s as H}from"./message-CdtxqLlh.js";import{e as P,f as Z}from"./index-Bk_oskDL.js";import{u as J,a as K}from"./vue-router-CZY6S6gL.js";import{d as w,r as Q,Z as W,s as X,o as d,c,V as t,M as o,O as Y,u as a,L as h,a as r,S as m,T as p,U as ee,aa as te}from"./@vue-TMcuEboY.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./@vueuse-DE_336rM.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";const oe={class:"w-80"},se={class:"flex-1"},ae={class:"w-full max-w-[320px]"},ne={class:"form-tips"},ie=w({name:"noticeEdit"}),je=w({...ie,setup(le){const f=J(),y=K(),u=Q(!1),s=W({id:"",scene_name:"",type:"",scene_desc:"",sms_notice:{status:0,template_id:"",content:"",tips:[]},oa_notice:{},mnp_notice:{},system_notice:{}}),V={"sms_notice.template_id":[{required:!0,message:"请输入模板ID",trigger:"blur"}],"sms_notice.content":[{required:!0,message:"请输入短信内容",trigger:"blur"}]},{removeTab:E}=P(),v=X(),k=async()=>{u.value=!0;const i=await A({id:f.query.id});Object.keys(i).forEach(e=>{s[e]=i[e]}),u.value=!1},x=async()=>{var e;await((e=v.value)==null?void 0:e.validate());const i={id:s.id,template:z.pick(s,["sms_notice","oa_notice","mnp_notice","system_notice"])};await H(i),Z.msgSuccess("操作成功"),E(),y.back()};return f.query.id&&k(),(i,e)=>{const R=L,_=N,l=S,b=T,D=U,g=M,B=O,C=G,q=j,I=$;return d(),c("div",null,[t(_,{class:"!border-none",shadow:"never"},{default:o(()=>[t(R,{content:"编辑通知设置",onBack:e[0]||(e[0]=n=>i.$router.back())})]),_:1}),Y((d(),h(B,{ref_key:"formRef",ref:v,model:a(s),"label-width":"120px",rules:V},{default:o(()=>[t(_,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[e[4]||(e[4]=r("div",{class:"font-medium mb-7"},"通知名称",-1)),t(l,{label:"通知名称"},{default:o(()=>[m(p(a(s).scene_name),1)]),_:1}),t(l,{label:"通知类型"},{default:o(()=>[m(p(a(s).type),1)]),_:1}),t(l,{label:"通知业务"},{default:o(()=>[m(p(a(s).scene_desc),1)]),_:1})]),_:1}),t(_,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[e[7]||(e[7]=r("div",{class:"font-medium mb-7"},"短信通知",-1)),t(l,{label:"开启状态",prop:"sms_notice.status",required:""},{default:o(()=>[t(D,{modelValue:a(s).sms_notice.status,"onUpdate:modelValue":e[1]||(e[1]=n=>a(s).sms_notice.status=n)},{default:o(()=>[t(b,{value:"0"},{default:o(()=>e[5]||(e[5]=[m("关闭")])),_:1}),t(b,{value:"1"},{default:o(()=>e[6]||(e[6]=[m("开启")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(l,{label:"模板ID",prop:"sms_notice.template_id"},{default:o(()=>[r("div",oe,[t(g,{modelValue:a(s).sms_notice.template_id,"onUpdate:modelValue":e[2]||(e[2]=n=>a(s).sms_notice.template_id=n),placeholder:"请输入模板ID"},null,8,["modelValue"])])]),_:1}),t(l,{label:"短信内容",prop:"sms_notice.content"},{default:o(()=>[r("div",se,[r("div",ae,[t(g,{type:"textarea",autosize:{minRows:6,maxRows:6},modelValue:a(s).sms_notice.content,"onUpdate:modelValue":e[3]||(e[3]=n=>a(s).sms_notice.content=n)},null,8,["modelValue"])]),r("div",ne,[(d(!0),c(ee,null,te(a(s).sms_notice.tips,(n,F)=>(d(),c("div",{key:F},p(n),1))),128))])])]),_:1})]),_:1})]),_:1},8,["model"])),[[I,a(u)]]),t(q,null,{default:o(()=>[t(C,{type:"primary",onClick:x},{default:o(()=>e[8]||(e[8]=[m("保存")])),_:1})]),_:1})])}}});export{je as default};
