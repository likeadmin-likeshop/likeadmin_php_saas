import{A as N,B as P,g as U,C as F,p as I,G as K,H as M,I as S,J as j}from"./element-plus-D_drhFLK.js";import{_ as q}from"./index.vue_vue_type_script_setup_true_lang-CJUmABp7.js";import{_ as G}from"./index.vue_vue_type_script_setup_true_lang-DOZYqS-I.js";import{_ as H}from"./index.vue_vue_type_script_setup_true_lang-Dsf4pDJm.js";import{d as J,Z as O,a4 as Z,f as Q,an as W,o as p,c as X,V as t,M as l,u as a,ab as Y,S as r,O as c,L as g,T as ee,a as te,i as ae}from"./@vue-TMcuEboY.js";import{d as v,e as ne}from"./consumer-HLRX7vYi.js";import{u as le}from"./usePaging-DFi_nJOG.js";import{f as oe}from"./index-BExBOscM.js";import{u as se}from"./getExposeType-C5XerQxt.js";import{_ as ie}from"./edit.vue_vue_type_script_setup_true_lang-B-NyyWjK.js";const re={class:"h-full flex flex-col"},me={class:"flex justify-end mt-4"},ye=J({__name:"index",props:{tenant_id:{type:Number,default:0}},setup(C){const b=C,f=se(),o=O({keyword:"",create_time_start:"",create_time_end:"",tenant_id:b.tenant_id}),{pager:s,getLists:m,resetPage:k,resetParams:T}=le({fetchFun:v,params:o});Z(()=>{m()});const V=async x=>{await oe.confirm("确定要删除？"),await ne({id:x}),m()};return Q(()=>{m()}),(x,e)=>{const E=N,u=P,R=H,d=U,$=G,h=F,B=I,i=K,A=M,D=S,z=q,y=W("perms"),L=j;return p(),X("div",re,[t(h,{ref:"formRef",class:"-mb-4 flex flex-wrap",model:a(o),inline:!0},{default:l(()=>[t(u,{label:"账号信息",class:"flex-1 min-w-[200px] max-w-[300px]"},{default:l(()=>[t(E,{modelValue:a(o).keyword,"onUpdate:modelValue":e[0]||(e[0]=n=>a(o).keyword=n),placeholder:"账号/名称",clearable:"",onKeyup:Y(a(k),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(u,{label:"创建时间",class:"flex-1 min-w-[350px] max-w-full m-0"},{default:l(()=>[t(R,{startTime:a(o).create_time_start,"onUpdate:startTime":e[1]||(e[1]=n=>a(o).create_time_start=n),endTime:a(o).create_time_end,"onUpdate:endTime":e[2]||(e[2]=n=>a(o).create_time_end=n)},null,8,["startTime","endTime"])]),_:1}),t(u,{class:"!mr-0"},{default:l(()=>[t(d,{type:"primary",onClick:a(k)},{default:l(()=>e[5]||(e[5]=[r("查询")])),_:1},8,["onClick"]),t(d,{onClick:a(T)},{default:l(()=>e[6]||(e[6]=[r("重置")])),_:1},8,["onClick"]),t(d,{onClick:e[3]||(e[3]=n=>{var _;return(_=a(f))==null?void 0:_.open("add")})},{default:l(()=>e[7]||(e[7]=[r("新增")])),_:1}),t($,{class:"ml-2.5","fetch-fun":a(v),params:a(o),"page-size":a(s).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"]),c((p(),g(D,{class:"mt-4 flex-1",data:a(s).lists,height:"100%"},{default:l(()=>[t(i,{label:"头像",width:"90",align:"center"},{default:l(({row:n})=>[t(B,{src:n.avatar,size:50},null,8,["src"])]),_:1}),t(i,{label:"名称",prop:"name","min-width":"100"}),t(i,{label:"账号",prop:"account","min-width":"100"}),t(i,{label:"状态","min-width":"80"},{default:l(({row:n})=>[t(A,{type:n.disable===0?"primary":"danger"},{default:l(()=>[r(ee(n.disable===0?"开启":"关闭"),1)]),_:2},1032,["type"])]),_:1}),t(i,{label:"创建时间",prop:"create_time","min-width":"120"}),t(i,{label:"操作",width:"auto","min-width":"90",fixed:"right"},{default:l(({row:n})=>[c((p(),g(d,{class:"mr-1",type:"primary",link:"",onClick:_=>{var w;return(w=a(f))==null?void 0:w.open("edit",n.id)}},{default:l(()=>e[8]||(e[8]=[r(" 编辑 ")])),_:2},1032,["onClick"])),[[y,["user.user/edit"]]]),c((p(),g(d,{class:"!ml-0",type:"danger",link:"",onClick:_=>V(n.id)},{default:l(()=>e[9]||(e[9]=[r(" 删除 ")])),_:2},1032,["onClick"])),[[y,["user.user/delete"]]])]),_:1})]),_:1},8,["data"])),[[L,a(s).loading]]),te("div",me,[t(z,{modelValue:a(s),"onUpdate:modelValue":e[4]||(e[4]=n=>ae(s)?s.value=n:null),onChange:a(m)},null,8,["modelValue","onChange"])]),t(ie,{ref_key:"editRef",ref:f,tenant_id:b.tenant_id,onRefresh:a(m)},null,8,["tenant_id","onRefresh"])])}}});export{ye as _};
