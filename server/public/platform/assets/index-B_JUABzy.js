import{A as z,B as G,I as H,J,g as Z,C as j,G as Q,H as W,R as X,K as Y,O as ee}from"./element-plus-CSiqOtzA.js";import{f as te,b as ae}from"./index-VLRCOjLY.js";import{d as S,s as E,r as x,Z as oe,f as le,n as V,an as ne,o as d,c as se,V as t,M as a,u as s,ab as ie,S as i,a as re,O as v,L as f,T as pe,R as N}from"./@vue-TMcuEboY.js";import{d as de,a as me}from"./department-DLAzJG2E.js";import{_ as ue}from"./edit.vue_vue_type_script_setup_true_lang-DJGrMr14.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-CZY6S6gL.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-DE_336rM.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";import"./index-w0RpWbpp.js";import"./useDictOptions-Bg13ULne.js";const fe={class:"department"},ce=S({name:"department"}),We=S({...ce,setup(_e){const R=E(),c=E(),D=E();let b=!1;const w=x(!1),C=x([]),m=oe({status:"",name:""}),y=x(!1),u=async()=>{w.value=!0,C.value=await de(m),w.value=!1},h=()=>{var o;(o=D.value)==null||o.resetFields(),u()},$=async o=>{var e,n;y.value=!0,await V(),o&&((e=c.value)==null||e.setFormData({pid:o})),(n=c.value)==null||n.open("add")},I=async o=>{var e,n;y.value=!0,await V(),(e=c.value)==null||e.open("edit"),(n=c.value)==null||n.getDetail(o)},K=async o=>{await te.confirm("确定要删除？"),await me({id:o}),u()},B=()=>{b=!b,T(C.value,b)},T=(o,e=!0)=>{var n;for(const r in o)(n=R.value)==null||n.toggleRowExpansion(o[r],e),o[r].children&&T(o[r].children,e)};return le(async()=>{await u(),V(()=>{B()})}),(o,e)=>{const n=z,r=G,g=H,O=J,p=Z,P=j,F=Q,A=ae,_=W,M=X,U=Y,k=ne("perms"),q=ee;return d(),se("div",fe,[t(F,{class:"!border-none",shadow:"never"},{default:a(()=>[t(P,{ref_key:"formRef",ref:D,class:"mb-[-16px]",model:s(m),inline:!0},{default:a(()=>[t(r,{label:"部门名称",prop:"name"},{default:a(()=>[t(n,{class:"w-[280px]",modelValue:s(m).name,"onUpdate:modelValue":e[0]||(e[0]=l=>s(m).name=l),clearable:"",onKeyup:ie(u,["enter"])},null,8,["modelValue"])]),_:1}),t(r,{label:"部门状态",prop:"status",class:"w-[280px]"},{default:a(()=>[t(O,{modelValue:s(m).status,"onUpdate:modelValue":e[1]||(e[1]=l=>s(m).status=l)},{default:a(()=>[t(g,{label:"全部",value:""}),t(g,{label:"正常",value:"1"}),t(g,{label:"停用",value:"0"})]),_:1},8,["modelValue"])]),_:1}),t(r,null,{default:a(()=>[t(p,{type:"primary",onClick:u},{default:a(()=>e[4]||(e[4]=[i("查询")])),_:1}),t(p,{onClick:h},{default:a(()=>e[5]||(e[5]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(F,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[re("div",null,[v((d(),f(p,{type:"primary",onClick:e[2]||(e[2]=l=>$())},{icon:a(()=>[t(A,{name:"el-icon-Plus"})]),default:a(()=>[e[6]||(e[6]=i(" 新增 "))]),_:1})),[[k,["dept.dept/add"]]]),t(p,{onClick:B},{default:a(()=>e[7]||(e[7]=[i(" 展开/折叠 ")])),_:1})]),v((d(),f(U,{ref_key:"tableRef",ref:R,class:"mt-4",size:"large",data:s(C),"row-key":"id","tree-props":{children:"children",hasChildren:"hasChildren"}},{default:a(()=>[t(_,{label:"部门名称",prop:"name","min-width":"150","show-overflow-tooltip":""}),t(_,{label:"部门状态",prop:"status","min-width":"100"},{default:a(({row:l})=>[t(M,{class:"ml-2",type:l.status?"primary":"danger"},{default:a(()=>[i(pe(l.status_desc),1)]),_:2},1032,["type"])]),_:1}),t(_,{label:"排序",prop:"sort","min-width":"100"}),t(_,{label:"更新时间",prop:"update_time","min-width":"180"}),t(_,{label:"操作",width:"160",fixed:"right"},{default:a(({row:l})=>[v((d(),f(p,{type:"primary",link:"",onClick:L=>$(l.id)},{default:a(()=>e[8]||(e[8]=[i(" 新增 ")])),_:2},1032,["onClick"])),[[k,["dept.dept/add"]]]),v((d(),f(p,{type:"primary",link:"",onClick:L=>I(l)},{default:a(()=>e[9]||(e[9]=[i(" 编辑 ")])),_:2},1032,["onClick"])),[[k,["dept.dept/edit"]]]),l.pid!==0?v((d(),f(p,{key:0,type:"danger",link:"",onClick:L=>K(l.id)},{default:a(()=>e[10]||(e[10]=[i(" 删除 ")])),_:2},1032,["onClick"])),[[k,["dept.dept/delete"]]]):N("",!0)]),_:1})]),_:1},8,["data"])),[[q,s(w)]])]),_:1}),s(y)?(d(),f(ue,{key:0,ref_key:"editRef",ref:c,onSuccess:u,onClose:e[3]||(e[3]=l=>y.value=!1)},null,512)):N("",!0)])}}});export{We as default};
