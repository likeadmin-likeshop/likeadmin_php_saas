import{S as L,G as N,C as T,L as U,M as F,B as M,D as G,h as O,K as $}from"./element-plus-DYHMmEbd.js";import{_ as j}from"./index-geQbQ5Vd.js";import{u as z,a as H}from"./vue-router-CoNqKBK4.js";import{l as K}from"./lodash-CSq-IaWf.js";import{n as P,s as Z}from"./message-A-2bxkPX.js";import{e as h,f as A}from"./index-CR4R7Ze_.js";import{d as w,r as J,Z as Q,s as W,o as d,c,V as t,M as o,O as X,u as a,L as Y,a as r,S as m,T as p,U as ee,aa as te}from"./@vue-pHjCrgw6.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-NId5miUe.js";import"./dayjs--xHAjlqv.js";import"./axios-CJlJSG1h.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-sDkjjtif.js";import"./pinia-CJRVDLHa.js";import"./@vueuse-YJSHNXWG.js";import"./css-color-function-DEEjFEOq.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./balanced-match-D4yLO45F.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-BlHxVXLb.js";import"./clipboard-CfUngHJy.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-kkhpHHq8.js";import"./@highlightjs-DIPqHoKm.js";const oe={class:"w-80"},se={class:"flex-1"},ae={class:"w-full max-w-[320px]"},ne={class:"form-tips"},le=w({name:"noticeEdit"}),je=w({...le,setup(ie){const f=z(),y=H(),_=J(!1),s=Q({id:"",scene_name:"",type:"",scene_desc:"",sms_notice:{status:0,template_id:"",content:"",tips:[]},oa_notice:{},mnp_notice:{},system_notice:{}}),V={"sms_notice.template_id":[{required:!0,message:"请输入模板ID",trigger:"blur"}],"sms_notice.content":[{required:!0,message:"请输入短信内容",trigger:"blur"}]},{removeTab:E}=h(),b=W(),k=async()=>{_.value=!0;const l=await P({id:f.query.id});Object.keys(l).forEach(e=>{s[e]=l[e]}),_.value=!1},x=async()=>{var e;await((e=b.value)==null?void 0:e.validate());const l={id:s.id,template:K.pick(s,["sms_notice","oa_notice","mnp_notice","system_notice"])};await Z(l),A.msgSuccess("操作成功"),E(),y.back()};return f.query.id&&k(),(l,e)=>{const D=L,u=N,i=T,v=U,R=F,g=M,B=G,C=O,q=j,I=$;return d(),c("div",null,[t(u,{class:"!border-none",shadow:"never"},{default:o(()=>[t(D,{content:"编辑通知设置",onBack:e[0]||(e[0]=n=>l.$router.back())})]),_:1}),X((d(),Y(B,{ref_key:"formRef",ref:b,model:a(s),"label-width":"120px",rules:V},{default:o(()=>[t(u,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[e[4]||(e[4]=r("div",{class:"font-medium mb-7"},"通知名称",-1)),t(i,{label:"通知名称"},{default:o(()=>[m(p(a(s).scene_name),1)]),_:1}),t(i,{label:"通知类型"},{default:o(()=>[m(p(a(s).type),1)]),_:1}),t(i,{label:"通知业务"},{default:o(()=>[m(p(a(s).scene_desc),1)]),_:1})]),_:1}),t(u,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[e[7]||(e[7]=r("div",{class:"font-medium mb-7"},"短信通知",-1)),t(i,{label:"开启状态",prop:"sms_notice.status",required:""},{default:o(()=>[t(R,{modelValue:a(s).sms_notice.status,"onUpdate:modelValue":e[1]||(e[1]=n=>a(s).sms_notice.status=n)},{default:o(()=>[t(v,{label:"0"},{default:o(()=>e[5]||(e[5]=[m("关闭")])),_:1}),t(v,{label:"1"},{default:o(()=>e[6]||(e[6]=[m("开启")])),_:1})]),_:1},8,["modelValue"])]),_:1}),t(i,{label:"模板ID",prop:"sms_notice.template_id"},{default:o(()=>[r("div",oe,[t(g,{modelValue:a(s).sms_notice.template_id,"onUpdate:modelValue":e[2]||(e[2]=n=>a(s).sms_notice.template_id=n),placeholder:"请输入模板ID"},null,8,["modelValue"])])]),_:1}),t(i,{label:"短信内容",prop:"sms_notice.content"},{default:o(()=>[r("div",se,[r("div",ae,[t(g,{type:"textarea",autosize:{minRows:6,maxRows:6},modelValue:a(s).sms_notice.content,"onUpdate:modelValue":e[3]||(e[3]=n=>a(s).sms_notice.content=n)},null,8,["modelValue"])]),r("div",ne,[(d(!0),c(ee,null,te(a(s).sms_notice.tips,(n,S)=>(d(),c("div",{key:S},p(n),1))),128))])])]),_:1})]),_:1})]),_:1},8,["model"])),[[I,a(_)]]),t(q,null,{default:o(()=>[t(C,{type:"primary",onClick:x},{default:o(()=>e[8]||(e[8]=[m("保存")])),_:1})]),_:1})])}}});export{je as default};
