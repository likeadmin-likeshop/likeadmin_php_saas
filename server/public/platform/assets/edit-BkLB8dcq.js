import{C as K,a as O,L as z,B as G,A as $,M as j,f as J,g as Q,h as W,O as X}from"./element-plus-CSiqOtzA.js";import{_ as Y}from"./picker-CRz-I7Px.js";import{g as Z,s as h}from"./pay-Bx2CBXMw.js";import{u as ee}from"./useLockFn-BhPLnZje.js";import{u as le}from"./getExposeType-C5XerQxt.js";import{d as oe,r as m,b as te,o as y,L as ie,M as a,O as ae,c as V,V as o,u as l,S as u,T as ne,a as n,U as k,R as x,i as re}from"./@vue-TMcuEboY.js";import{d as pe}from"./index-Dc9eTubx.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./index-DOWM_oYd.js";import"./index-CePp7Wrf.js";import"./index.vue_vue_type_script_setup_true_lang-ggB8NA6X.js";import"./index-Bis-IdQI.js";import"./@vueuse-DE_336rM.js";import"./usePaging-DFi_nJOG.js";import"./vue3-video-play-xg7gp0Bu.js";import"./vuedraggable-OYPBN08G.js";import"./vue-CHxGqOme.js";import"./sortablejs-DdgKbxid.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-CZY6S6gL.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";const se={class:"h-full flex flex-col","element-loading-text":"加载中...","element-loading-background":"var(--el-bg-color)"},de={class:"flex-1"},me={class:"flex-1"},ue={class:"flex-1"},fe=oe({__name:"edit",emits:["refresh"],setup(_e,{expose:b,emit:w}){const f=m(!1),v=le(),U=m(),C=m("profile"),I=m(!1),c=m(!0),_=te(()=>{switch(t.value.pay_way){case 1:return"余额支付";case 2:return"微信支付";case 3:return"支付宝支付";default:return""}}),t=m({id:"",pay_way:0,name:"",icon:"",sort:0,remark:"",domain:"",config:{interface_version:"",merchant_type:"",mch_id:"",pay_sign_key:"",apiclient_cert:"",apiclient_key:"",mode:"",app_id:"",private_key:"",ali_public_key:""}}),E={name:[{required:!0,message:"请输入显示名称"}],"config.mch_id":[{required:!0,message:"请输入微信支付商户号"}],"config.pay_sign_key":[{required:!0,message:"请输入微信支付商户API密钥"}],"config.apiclient_cert":[{required:!0,message:"请输入微信支付证书"}],"config.apiclient_key":[{required:!0,message:"请输入微信支付证书密钥"}],"config.app_id":[{required:!0,message:"请输入支付宝应用ID"}],"config.private_key":[{required:!0,message:"请输入支付宝应用私钥"}],"config.ali_public_key":[{required:!0,message:"请输入支付宝公钥"}]},D=w,P=(p,e,d)=>{c.value=!0,C.value=d||"profile",I.value=e||!1,q(p),U.value=p,f.value=!0},q=async p=>{const e=await Z({id:p});e.config||(e.config=t.value.config),c.value=!1,t.value=e},R=p=>{O.confirm("修改还未保存，确认退出编辑吗？").then(()=>{p()}).catch(()=>{})},B=()=>{var p;(p=v.value)==null||p.resetFields()},A=async()=>{var p;await((p=v.value)==null?void 0:p.validate()),await h(t.value),f.value=!1,D("refresh")},{isLock:F,lockFn:N}=ee(A);return b({openHandle:P}),(p,e)=>{const d=z,r=G,s=$,L=Y,g=j,S=J,M=Q,T=W,H=X;return y(),ie(T,{modelValue:l(f),"onUpdate:modelValue":e[14]||(e[14]=i=>re(f)?f.value=i:null),"destroy-on-close":"",title:`${l(_)}配置`,direction:"rtl",size:"50%",onClose:B,"before-close":R},{default:a(()=>[ae((y(),V("div",se,[o(l(K),{ref_key:"formRef",ref:v,model:l(t),"label-width":"9rem",rules:E},{default:a(()=>[o(r,{label:"支付方式"},{default:a(()=>[o(d,{value:l(_),"model-value":l(_)},{default:a(()=>[u(ne(l(_)),1)]),_:1},8,["value","model-value"])]),_:1}),o(r,{label:"显示名称",prop:"name"},{default:a(()=>[o(s,{modelValue:l(t).name,"onUpdate:modelValue":e[0]||(e[0]=i=>l(t).name=i),placeholder:"请输入显示名称",style:{"max-width":"250px"}},null,8,["modelValue"])]),_:1}),o(r,{label:"图标",prop:"image"},{default:a(()=>[n("div",null,[o(L,{limit:1,disabled:!1,modelValue:l(t).icon,"onUpdate:modelValue":e[1]||(e[1]=i=>l(t).icon=i)},null,8,["modelValue"]),e[15]||(e[15]=n("div",{class:"form-tips"},"建议尺寸：200*200px",-1))])]),_:1}),l(t).pay_way==2?(y(),V(k,{key:0},[o(r,{prop:"config.interface_version",label:"微信支付接口版本"},{default:a(()=>[n("div",null,[o(g,{modelValue:l(t).config.interface_version,"onUpdate:modelValue":e[2]||(e[2]=i=>l(t).config.interface_version=i)},{default:a(()=>[o(d,{value:"v3"},{default:a(()=>e[16]||(e[16]=[u("V3")])),_:1})]),_:1},8,["modelValue"]),e[17]||(e[17]=n("div",{class:"form-tips"},"暂时只支持V3版本",-1))])]),_:1}),o(r,{label:"商户类型",prop:"config.merchant_type"},{default:a(()=>[n("div",null,[o(g,{modelValue:l(t).config.merchant_type,"onUpdate:modelValue":e[3]||(e[3]=i=>l(t).config.merchant_type=i)},{default:a(()=>[o(d,{value:"ordinary_merchant"},{default:a(()=>e[18]||(e[18]=[u("普通商户")])),_:1})]),_:1},8,["modelValue"]),e[19]||(e[19]=n("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1))])]),_:1}),o(r,{label:"微信支付商户号",prop:"config.mch_id"},{default:a(()=>[n("div",null,[o(s,{modelValue:l(t).config.mch_id,"onUpdate:modelValue":e[4]||(e[4]=i=>l(t).config.mch_id=i),placeholder:"请输入微信支付商户号",style:{"max-width":"250px"}},null,8,["modelValue"]),e[20]||(e[20]=n("div",{class:"form-tips"},"微信支付商户号（MCHID）",-1))])]),_:1}),o(r,{label:"商户API密钥",prop:"config.pay_sign_key"},{default:a(()=>[n("div",null,[o(s,{modelValue:l(t).config.pay_sign_key,"onUpdate:modelValue":e[5]||(e[5]=i=>l(t).config.pay_sign_key=i),placeholder:"请输入微信支付商户API密钥",style:{"max-width":"250px"}},null,8,["modelValue"]),e[21]||(e[21]=n("div",{class:"form-tips"},"微信支付商户API密钥（paySignKey）",-1))])]),_:1}),o(r,{label:"微信支付证书",prop:"config.apiclient_cert"},{default:a(()=>[n("div",null,[o(s,{type:"textarea",rows:3,modelValue:l(t).config.apiclient_cert,"onUpdate:modelValue":e[6]||(e[6]=i=>l(t).config.apiclient_cert=i),placeholder:"请输入微信支付证书",style:{"max-width":"400px"}},null,8,["modelValue"]),e[22]||(e[22]=n("div",{class:"form-tips"}," 微信支付证书（apiclient_cert.pem），前往微信商家平台生成并黏贴至此处 ",-1))])]),_:1}),o(r,{label:"微信支付证书密钥",prop:"config.apiclient_key"},{default:a(()=>[n("div",null,[o(s,{type:"textarea",rows:3,modelValue:l(t).config.apiclient_key,"onUpdate:modelValue":e[7]||(e[7]=i=>l(t).config.apiclient_key=i),placeholder:"请输入微信支付证书密钥",style:{"max-width":"400px"}},null,8,["modelValue"]),e[23]||(e[23]=n("div",{class:"form-tips"}," 微信支付证书密钥（apiclient_key.pem），前往微信商家平台生成并黏贴至此处 ",-1))])]),_:1}),o(r,{label:"支付授权目录"},{default:a(()=>e[24]||(e[24]=[n("div",null,[n("div",null,[n("span",{class:"mr-[20px]"},"https://前台手机域名地址/")])],-1)])),_:1})],64)):x("",!0),l(t).pay_way==3?(y(),V(k,{key:1},[o(r,{label:"模式",prop:"config.mode"},{default:a(()=>[n("div",null,[o(g,{modelValue:l(t).config.mode,"onUpdate:modelValue":e[8]||(e[8]=i=>l(t).config.mode=i)},{default:a(()=>[o(d,{value:"normal_mode"},{default:a(()=>e[25]||(e[25]=[u("普通模式")])),_:1})]),_:1},8,["modelValue"]),e[26]||(e[26]=n("div",{class:"form-tips"},"暂时仅支持支付宝普通模式",-1))])]),_:1}),o(r,{label:"商户类型",prop:"config.merchant_type"},{default:a(()=>[n("div",null,[o(g,{modelValue:l(t).config.merchant_type,"onUpdate:modelValue":e[9]||(e[9]=i=>l(t).config.merchant_type=i)},{default:a(()=>[o(d,{value:"ordinary_merchant"},{default:a(()=>e[27]||(e[27]=[u("普通商户")])),_:1})]),_:1},8,["modelValue"]),e[28]||(e[28]=n("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1))])]),_:1}),o(r,{label:"应用ID",prop:"config.app_id"},{default:a(()=>[n("div",de,[o(s,{modelValue:l(t).config.app_id,"onUpdate:modelValue":e[10]||(e[10]=i=>l(t).config.app_id=i),placeholder:"请输入支付宝应用ID",style:{"max-width":"250px"}},null,8,["modelValue"]),e[29]||(e[29]=n("div",{class:"form-tips"},"支付宝应用APP_ID",-1))])]),_:1}),o(r,{label:"应用私钥",prop:"config.private_key"},{default:a(()=>[n("div",me,[o(s,{type:"textarea",rows:3,modelValue:l(t).config.private_key,"onUpdate:modelValue":e[11]||(e[11]=i=>l(t).config.private_key=i),placeholder:"请输入支付宝应用私钥",style:{"max-width":"400px"}},null,8,["modelValue"]),e[30]||(e[30]=n("div",{class:"form-tips"},"支付宝应用私钥（private_key）",-1))])]),_:1}),o(r,{label:"支付宝公钥",prop:"config.ali_public_key"},{default:a(()=>[n("div",ue,[o(s,{type:"textarea",rows:3,modelValue:l(t).config.ali_public_key,"onUpdate:modelValue":e[12]||(e[12]=i=>l(t).config.ali_public_key=i),placeholder:"请输入支付宝公钥",style:{"max-width":"400px"}},null,8,["modelValue"]),e[31]||(e[31]=n("div",{class:"form-tips"},"支付宝公钥（alipayCertPublicKey）",-1))])]),_:1})],64)):x("",!0),o(r,{label:"排序",prop:"sort"},{default:a(()=>[n("div",null,[o(S,{modelValue:l(t).sort,"onUpdate:modelValue":e[13]||(e[13]=i=>l(t).sort=i),min:0,max:9999},null,8,["modelValue"]),e[32]||(e[32]=n("div",{class:"form-tips"},"默认为0， 数值越大越排前",-1))])]),_:1}),o(r,null,{default:a(()=>[o(M,{type:"primary",loading:l(F),onClick:l(N)},{default:a(()=>e[33]||(e[33]=[u("保存")])),_:1},8,["loading","onClick"])]),_:1})]),_:1},8,["model"])])),[[H,l(c)]])]),_:1},8,["modelValue","title"])}}}),al=pe(fe,[["__scopeId","data-v-9626b3ee"]]);export{al as default};
