import{L as N,C as F,B as S,M as K,h as L,g as T,D as G}from"./element-plus-DYHMmEbd.js";import{M as H}from"./picker-BC4SDxLh.js";import{s as O,g as Z}from"./pay-C8_Kaljw.js";import{P as j}from"./index-C9g2zszt.js";import{d as z,s as b,b as J,Z as Q,an as W,o as u,c as g,V as l,M as n,u as a,a as i,U as k,S as f,O as X,L as Y,R as x}from"./@vue-pHjCrgw6.js";const $={class:"edit-popup"},h={class:"flex-1"},ee={class:"flex-1"},le={class:"flex-1"},oe={class:"flex-1"},re=z({__name:"edit",emits:["success","close"],setup(ae,{expose:w,emit:U}){const c=U,V=b(),_=b(),y=J(()=>{switch(o.pay_way){case 1:return"余额支付";case 2:return"微信支付";case 3:return"支付宝支付";default:return""}}),o=Q({id:"",pay_way:0,name:"",icon:"",sort:0,remark:"",domain:"",config:{interface_version:"",merchant_type:"",mch_id:"",pay_sign_key:"",apiclient_cert:"",apiclient_key:"",mode:"",app_id:"",private_key:"",ali_public_key:""}}),I={name:[{required:!0,message:"请输入显示名称"}],"config.mch_id":[{required:!0,message:"请输入微信支付商户号"}],"config.pay_sign_key":[{required:!0,message:"请输入微信支付商户API密钥"}],"config.apiclient_cert":[{required:!0,message:"请输入微信支付证书"}],"config.apiclient_key":[{required:!0,message:"请输入微信支付证书密钥"}],"config.app_id":[{required:!0,message:"请输入支付宝应用ID"}],"config.private_key":[{required:!0,message:"请输入支付宝应用私钥"}],"config.ali_public_key":[{required:!0,message:"请输入支付宝公钥"}]},P=async()=>{var p,e;await((p=V.value)==null?void 0:p.validate()),await O(o),(e=_.value)==null||e.close(),c("success")},C=()=>{var p;(p=_.value)==null||p.open()},v=p=>{for(const e in o)p[e]!=null&&p[e]!=null&&(o[e]=p[e])},D=async p=>{const e=await Z({id:p.id});v(e)},R=()=>{c("close")};return w({open:C,setFormData:v,getDetail:D}),(p,e)=>{const d=N,s=F,r=S,q=H,m=K,E=L,B=T,A=G,M=W("copy");return u(),g("div",$,[l(j,{ref_key:"popupRef",ref:_,title:a(y),async:!0,width:"550px",onConfirm:P,onClose:R},{default:n(()=>[l(A,{ref_key:"formRef",ref:V,model:a(o),"label-width":"84px",rules:I},{default:n(()=>[l(s,{label:"支付方式"},{default:n(()=>[l(d,{label:a(y),"model-value":a(y)},null,8,["label","model-value"])]),_:1}),l(s,{label:"显示名称",prop:"name"},{default:n(()=>[l(r,{modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=t=>a(o).name=t),placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1}),l(s,{label:"显示图标",prop:"image"},{default:n(()=>[i("div",null,[l(q,{limit:1,disabled:!1,modelValue:a(o).icon,"onUpdate:modelValue":e[1]||(e[1]=t=>a(o).icon=t)},null,8,["modelValue"]),e[14]||(e[14]=i("span",{class:"form-tips"},"建议尺寸：200*200px",-1))])]),_:1}),a(o).pay_way==2?(u(),g(k,{key:0},[l(s,{prop:"config.interface_version",label:"微信支付接口版本"},{default:n(()=>[i("div",null,[l(m,{modelValue:a(o).config.interface_version,"onUpdate:modelValue":e[2]||(e[2]=t=>a(o).config.interface_version=t)},{default:n(()=>[l(d,{label:"v3"})]),_:1},8,["modelValue"]),e[15]||(e[15]=i("div",{class:"form-tips"},"暂时只支持V3版本",-1))])]),_:1}),l(s,{label:"商户类型",prop:"config.merchant_type"},{default:n(()=>[i("div",null,[l(m,{modelValue:a(o).config.merchant_type,"onUpdate:modelValue":e[3]||(e[3]=t=>a(o).config.merchant_type=t)},{default:n(()=>[l(d,{label:"ordinary_merchant"},{default:n(()=>e[16]||(e[16]=[f("普通商户")])),_:1})]),_:1},8,["modelValue"]),e[17]||(e[17]=i("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1))])]),_:1}),l(s,{label:"微信支付商户号",prop:"config.mch_id"},{default:n(()=>[i("div",h,[l(r,{modelValue:a(o).config.mch_id,"onUpdate:modelValue":e[4]||(e[4]=t=>a(o).config.mch_id=t),placeholder:"请输入微信支付商户号"},null,8,["modelValue"]),e[18]||(e[18]=i("div",{class:"form-tips"},"微信支付商户号（MCHID）",-1))])]),_:1}),l(s,{label:"商户API密钥",prop:"config.pay_sign_key"},{default:n(()=>[l(r,{modelValue:a(o).config.pay_sign_key,"onUpdate:modelValue":e[5]||(e[5]=t=>a(o).config.pay_sign_key=t),placeholder:"请输入微信支付商户API密钥"},null,8,["modelValue"]),e[19]||(e[19]=i("span",{class:"form-tips"},"微信支付商户API密钥（paySignKey）",-1))]),_:1}),l(s,{label:"微信支付证书",prop:"config.apiclient_cert"},{default:n(()=>[l(r,{type:"textarea",rows:"3",modelValue:a(o).config.apiclient_cert,"onUpdate:modelValue":e[6]||(e[6]=t=>a(o).config.apiclient_cert=t),placeholder:"请输入微信支付证书"},null,8,["modelValue"]),e[20]||(e[20]=i("span",{class:"form-tips"}," 微信支付证书（apiclient_cert.pem），前往微信商家平台生成并黏贴至此处 ",-1))]),_:1}),l(s,{label:"微信支付证书密钥",prop:"config.apiclient_key"},{default:n(()=>[l(r,{type:"textarea",rows:"3",modelValue:a(o).config.apiclient_key,"onUpdate:modelValue":e[7]||(e[7]=t=>a(o).config.apiclient_key=t),placeholder:"请输入微信支付证书密钥"},null,8,["modelValue"]),e[21]||(e[21]=i("span",{class:"form-tips"}," 微信支付证书密钥（apiclient_key.pem），前往微信商家平台生成并黏贴至此处 ",-1))]),_:1}),l(s,{label:"支付授权目录"},{default:n(()=>[i("div",null,[i("div",null,[e[23]||(e[23]=i("span",{class:"mr-[20px]"},"https://前台手机域名地址/",-1)),X((u(),Y(E,{link:"",type:"primary"},{default:n(()=>e[22]||(e[22]=[f(" 复制 ")])),_:1})),[[M,a(o).domain+"/mobile/"]])]),e[24]||(e[24]=i("span",{class:"form-tips"}," 支付授权目录仅用于参考，复制后前往微信商家平台填写 ",-1))])]),_:1})],64)):x("",!0),a(o).pay_way==3?(u(),g(k,{key:1},[l(s,{label:"模式",prop:"config.mode"},{default:n(()=>[i("div",null,[l(m,{modelValue:a(o).config.mode,"onUpdate:modelValue":e[8]||(e[8]=t=>a(o).config.mode=t)},{default:n(()=>[l(d,{label:"normal_mode"},{default:n(()=>e[25]||(e[25]=[f("普通模式")])),_:1})]),_:1},8,["modelValue"]),e[26]||(e[26]=i("div",{class:"form-tips"},"暂时仅支持支付宝普通模式",-1))])]),_:1}),l(s,{label:"商户类型",prop:"config.merchant_type"},{default:n(()=>[i("div",null,[l(m,{modelValue:a(o).config.merchant_type,"onUpdate:modelValue":e[9]||(e[9]=t=>a(o).config.merchant_type=t)},{default:n(()=>[l(d,{label:"ordinary_merchant"},{default:n(()=>e[27]||(e[27]=[f("普通商户")])),_:1})]),_:1},8,["modelValue"]),e[28]||(e[28]=i("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1))])]),_:1}),l(s,{label:"应用ID",prop:"config.app_id"},{default:n(()=>[i("div",ee,[l(r,{modelValue:a(o).config.app_id,"onUpdate:modelValue":e[10]||(e[10]=t=>a(o).config.app_id=t),placeholder:"请输入支付宝应用ID"},null,8,["modelValue"]),e[29]||(e[29]=i("span",{class:"form-tips"}," 支付宝应用APP_ID ",-1))])]),_:1}),l(s,{label:"应用私钥",prop:"config.private_key"},{default:n(()=>[i("div",le,[l(r,{type:"textarea",rows:"3",modelValue:a(o).config.private_key,"onUpdate:modelValue":e[11]||(e[11]=t=>a(o).config.private_key=t),placeholder:"请输入支付宝应用私钥"},null,8,["modelValue"]),e[30]||(e[30]=i("span",{class:"form-tips"},"支付宝应用私钥（private_key） ",-1))])]),_:1}),l(s,{label:"支付宝公钥",prop:"config.ali_public_key"},{default:n(()=>[i("div",oe,[l(r,{type:"textarea",rows:"3",modelValue:a(o).config.ali_public_key,"onUpdate:modelValue":e[12]||(e[12]=t=>a(o).config.ali_public_key=t),placeholder:"请输入支付宝公钥"},null,8,["modelValue"]),e[31]||(e[31]=i("span",{class:"form-tips"},"支付宝公钥（alipayCertPublicKey） ",-1))])]),_:1})],64)):x("",!0),l(s,{label:"排序",prop:"sort"},{default:n(()=>[i("div",null,[l(B,{modelValue:a(o).sort,"onUpdate:modelValue":e[13]||(e[13]=t=>a(o).sort=t),min:0,max:9999},null,8,["modelValue"]),e[32]||(e[32]=i("div",{class:"form-tips"},"默认为0， 数值越大越排前",-1))])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{re as _};
