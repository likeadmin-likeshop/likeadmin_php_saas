import{g as T,G as B,H as D,I as L,F as N,J as P}from"./element-plus-D_drhFLK.js";import{_ as R}from"./index.vue_vue_type_script_setup_true_lang-CJUmABp7.js";import{g,f as $,x as F,b as j,y as q}from"./index-Dn6nOrG0.js";import{u as G}from"./usePaging-DFi_nJOG.js";import{d as w,ah as H,an as I,o as i,c as J,V as t,M as o,O as d,L as r,u as l,S as s,R as b,a as k,i as M}from"./@vue-TMcuEboY.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-CZY6S6gL.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-DE_336rM.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";const O={class:"flex"},S={class:"flex justify-end mt-4"},U=w({name:"scheduledTask"}),Tt=w({...U,setup(z){const{pager:p,getLists:c}=G({fetchFun:q,params:{}}),h=async f=>{await $.confirm("确定要删除？"),await F({id:f}),c()};return c(),(f,e)=>{const v=j,m=T,y=H("router-link"),a=B,u=D,x=L,C=R,V=N,_=I("perms"),E=P;return i(),J("div",null,[t(V,{shadow:"never",class:"!border-none"},{default:o(()=>[d((i(),r(y,{to:l(g)("crontab.crontab/add:edit")},{default:o(()=>[t(m,{type:"primary",class:"mb-[16px]"},{icon:o(()=>[t(v,{name:"el-icon-Plus"})]),default:o(()=>[e[1]||(e[1]=s(" 新增 "))]),_:1})]),_:1},8,["to"])),[[_,["crontab.crontab/add","crontab.crontab/add:edit"]]]),d((i(),r(x,{ref:"paneTable",class:"m-t-24",data:l(p).lists,style:{width:"100%"}},{default:o(()=>[t(a,{prop:"name",label:"名称","min-width":"120"}),t(a,{prop:"type_desc",label:"类型","min-width":"100"}),t(a,{prop:"command",label:"命令","min-width":"100"}),t(a,{prop:"params",label:"参数","min-width":"80"}),t(a,{prop:"expression",label:"规则","min-width":"100"}),t(a,{prop:"status",label:"状态","min-width":"100"},{default:o(({row:n})=>[n.status==1?(i(),r(u,{key:0,type:"success"},{default:o(()=>e[2]||(e[2]=[s("运行中")])),_:1})):b("",!0),n.status==2?(i(),r(u,{key:1,type:"info"},{default:o(()=>e[3]||(e[3]=[s("已停止")])),_:1})):b("",!0),n.status==3?(i(),r(u,{key:2,type:"danger"},{default:o(()=>e[4]||(e[4]=[s("错误")])),_:1})):b("",!0)]),_:1}),t(a,{prop:"error",label:"错误原因","min-width":"120"}),t(a,{prop:"last_time",label:"最后执行时间",width:"180"}),t(a,{prop:"time",label:"时长","min-width":"100"}),t(a,{prop:"max_time",label:"最大时长","min-width":"100"}),t(a,{label:"操作",width:"120",fixed:"right"},{default:o(({row:n})=>[k("div",O,[t(m,{type:"primary",link:""},{default:o(()=>[d((i(),r(y,{to:{path:l(g)("crontab.crontab/add:edit"),query:{id:n.id}}},{default:o(()=>[t(m,{type:"primary",link:""},{default:o(()=>e[5]||(e[5]=[s(" 编辑 ")])),_:1})]),_:2},1032,["to"])),[[_,["crontab.crontab/edit","crontab.crontab/add:edit"]]])]),_:2},1024),d((i(),r(m,{type:"danger",link:"",onClick:A=>h(n.id)},{default:o(()=>e[6]||(e[6]=[s(" 删除 ")])),_:2},1032,["onClick"])),[[_,["crontab.crontab/delete"]]])])]),_:1})]),_:1},8,["data"])),[[E,l(p).loading]]),k("div",S,[t(C,{modelValue:l(p),"onUpdate:modelValue":e[0]||(e[0]=n=>M(p)?p.value=n:null),onChange:l(c)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{Tt as default};
