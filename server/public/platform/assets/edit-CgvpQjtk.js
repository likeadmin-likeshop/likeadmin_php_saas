import{a as B,p as X,g as Y,B as Z,A as ee,K as te,L as ae,H as le,C as oe,k as se,l as ie,h as ne,J as re}from"./element-plus-Ou0nfccG.js";import{M as de}from"./picker-CtNTtJq0.js";import{b as me,d as pe}from"./index-BeFadpgT.js";import{b as ue,c as _e}from"./consumer-BYOvwJ0M.js";import{_ as fe}from"./index.vue_vue_type_script_setup_true_lang-DzHSz-Kh.js";import{_ as ce}from"./index.vue_vue_type_script_setup_true_lang-slzIjABO.js";import{l as ve}from"./lodash-es-R-kYiKr_.js";import{d as be,r as f,s as ye,an as ge,o as i,L as d,M as l,O as R,c,a as _,V as o,u as e,T as m,S as p,R as y,i as T,P as xe,n as Ve}from"./@vue-pHjCrgw6.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-NId5miUe.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./index-DWydQ7og.js";import"./index-CMbCeRmE.js";import"./index.vue_vue_type_script_setup_true_lang-CslcF2KS.js";import"./index-xL-oGJXP.js";import"./@vueuse-YJSHNXWG.js";import"./usePaging-DPOcKk5Q.js";import"./vue3-video-play-DOrZ4nvR.js";import"./vuedraggable-sl9LAZCB.js";import"./vue-PIt_O_4w.js";import"./sortablejs-DdgKbxid.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-CoNqKBK4.js";import"./pinia-CJRVDLHa.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-D4DIzBxc.js";import"./index.vue_vue_type_script_setup_true_lang-Dd4AnJ2h.js";import"./index.vue_vue_type_script_setup_true_lang-zHXeh_Mh.js";import"./getExposeType-SYJODb24.js";import"./edit.vue_vue_type_script_setup_true_lang-BRWweq6k.js";import"./department-M7HCBmEb.js";import"./post-ssViJPeh.js";import"./role-DfOnbIPj.js";import"./useDictOptions-CylmDL4O.js";import"./detail-DHMGeqPq.js";const ke={class:"h-full flex flex-col","element-loading-text":"加载中...","element-loading-background":"var(--el-bg-color)"},we={class:"flex flex-col pb-1"},Ee={class:"bg-page p-4 rounded flex justify-between items-center"},Ce={class:"flex items-center gap-4"},De={class:"flex flex-col justify-center gap-1"},Ue={class:"font-bold text-lg"},ze={class:"text-info text-xs"},he=["href"],Be=["href"],Re={class:"flex items-center ml-2 cursor-pointer"},Te={key:1},Ie={key:1},Ne={key:1},$e={key:0},qe={key:1},Fe=be({__name:"edit",emits:["refresh"],setup(Le,{expose:I,emit:N}){const g=f(!1),x=ye(),$=f(),b=f("profile"),s=f(!1),U=f(),w=f(!0),a=f({avatar:"",create_time:"",name:"",sn:"",domain:"",default_domain:"",id:0,disable:0,tel:"",domain_alias:"",domain_alias_enable:1,notes:""}),q={avatar:[{required:!0,message:"请选择头像",trigger:["change"]}],name:[{required:!0,message:"请输入租户名称",trigger:["blur"]}]},F=N,L=(r,t,v)=>{w.value=!0,b.value=v||"profile",s.value=t||!1,P(r),$.value=r,g.value=!0},M=async()=>{if(s.value)try{await B.confirm("修改还未保存，确认退出编辑吗？"),E()}catch{return!1}},P=async r=>{const t=await ue({id:r});w.value=!1,a.value=t,U.value=ve(a.value)},S=r=>{s.value?B.confirm("修改还未保存，确认退出编辑吗？").then(()=>{r()}).catch(()=>{console.log("取消")}):r()},j=()=>{var r;(r=x.value)==null||r.resetFields()},E=async r=>{var t,v;s.value?r?(await((t=x.value)==null?void 0:t.validate()),await A()):(a.value=U.value,(v=x.value)==null||v.clearValidate()):(b.value="profile",await Ve()),s.value=!s.value},A=async()=>{await _e(a.value),F("refresh")};return I({openHandle:L}),(r,t)=>{const v=X,C=Y,H=me,u=Z,G=de,V=ee,k=te,z=ae,h=le,J=oe,D=se,K=ie,O=ne,Q=ge("copy"),W=re;return i(),d(O,{modelValue:e(g),"onUpdate:modelValue":t[10]||(t[10]=n=>T(g)?g.value=n:null),"destroy-on-close":"",title:"租户信息",direction:"rtl",size:"50%",onClose:j,"before-close":S},{default:l(()=>[R((i(),c("div",ke,[_("div",we,[_("div",Ee,[_("div",Ce,[o(v,{src:e(a).avatar,size:58},null,8,["src"]),_("div",De,[_("span",Ue,m(e(a).name),1),_("span",ze,"ID："+m(e(a).id),1)])]),_("div",null,[o(C,{type:"info",size:"small"},{default:l(()=>[_("a",{href:e(a).domain,target:"_blank"},"登录",8,he)]),_:1}),e(s)?(i(),d(C,{key:0,type:"default",size:"small",onClick:t[0]||(t[0]=n=>E())},{default:l(()=>t[11]||(t[11]=[p(" 取消 ")])),_:1})):y("",!0),o(C,{type:"primary",size:"small",onClick:t[1]||(t[1]=n=>E(!0))},{default:l(()=>[p(m(e(s)?"保存":"编辑"),1)]),_:1})])])]),o(K,{class:"flex-1",modelValue:e(b),"onUpdate:modelValue":t[9]||(t[9]=n=>T(b)?b.value=n:null),"before-leave":M},{default:l(()=>[o(D,{label:"基础信息",name:"profile"},{default:l(()=>[o(J,{ref_key:"formRef",ref:x,class:xe(["grid grid-cols-2 gap-x-4 pt-2",{"!grid-cols-1":e(s)}]),"label-position":"right",model:e(a),"label-width":"100px",rules:q},{default:l(()=>[e(s)?y("",!0):(i(),d(u,{key:0,label:"默认域名：",class:"col-span-2"},{default:l(()=>[_("a",{href:e(a).default_domain,target:"_blank",rel:"noopener noreferrer"},m(e(a).default_domain||"--"),9,Be),R((i(),c("span",Re,[o(H,{name:"el-icon-DocumentCopy"}),t[12]||(t[12]=p(" 复制 "))])),[[Q,e(a).domain]])]),_:1})),e(s)?y("",!0):(i(),d(u,{key:1,label:"租户编码："},{default:l(()=>[p(m(e(a).sn),1)]),_:1})),e(s)?(i(),d(u,{key:2,label:"头像：",prop:"avatar"},{default:l(()=>[o(G,{modelValue:e(a).avatar,"onUpdate:modelValue":t[2]||(t[2]=n=>e(a).avatar=n),limit:1},null,8,["modelValue"])]),_:1})):y("",!0),o(u,{label:"租户名称：",prop:"name",required:e(s)},{default:l(()=>[e(s)?(i(),d(V,{key:0,modelValue:e(a).name,"onUpdate:modelValue":t[3]||(t[3]=n=>e(a).name=n),placeholder:"请输入租户名称",style:{"max-width":"250px"}},null,8,["modelValue"])):(i(),c("span",Te,m(e(a).name||"--"),1))]),_:1},8,["required"]),o(u,{label:"联系方式："},{default:l(()=>[e(s)?(i(),d(V,{key:0,modelValue:e(a).tel,"onUpdate:modelValue":t[4]||(t[4]=n=>e(a).tel=n),placeholder:"请输入联系方式",style:{"max-width":"250px"}},null,8,["modelValue"])):(i(),c("span",Ie,m(e(a).tel||"--"),1))]),_:1}),o(u,{label:"域名别名：",prop:"domain_alias"},{default:l(()=>[e(s)?(i(),d(V,{key:0,modelValue:e(a).domain_alias,"onUpdate:modelValue":t[5]||(t[5]=n=>e(a).domain_alias=n),placeholder:"请输入域名别名",style:{"max-width":"250px"}},null,8,["modelValue"])):(i(),c("span",Ne,m(e(a).domain_alias||"--"),1))]),_:1}),o(u,{label:"启用别名：",prop:"disable"},{default:l(()=>[e(s)?(i(),c("div",$e,[o(z,{modelValue:e(a).domain_alias_enable,"onUpdate:modelValue":t[6]||(t[6]=n=>e(a).domain_alias_enable=n)},{default:l(()=>[o(k,{value:0},{default:l(()=>t[13]||(t[13]=[p("启用")])),_:1}),o(k,{value:1},{default:l(()=>t[14]||(t[14]=[p("禁用")])),_:1})]),_:1},8,["modelValue"]),t[15]||(t[15]=_("p",{class:"text-info text-sm"}," Tips：项目线上部署后，配置好域名别名并解析到默认域名后启用即可生效 ",-1))])):(i(),d(h,{key:1,type:e(a).disable===0?"primary":"danger"},{default:l(()=>[p(m(e(a).domain_alias_enable===0?"启用":"禁用"),1)]),_:1},8,["type"]))]),_:1}),o(u,{label:"租户状态：",prop:"disable"},{default:l(()=>[e(s)?(i(),d(z,{key:0,modelValue:e(a).disable,"onUpdate:modelValue":t[7]||(t[7]=n=>e(a).disable=n)},{default:l(()=>[o(k,{value:0},{default:l(()=>t[16]||(t[16]=[p("开启")])),_:1}),o(k,{value:1},{default:l(()=>t[17]||(t[17]=[p("关闭")])),_:1})]),_:1},8,["modelValue"])):(i(),d(h,{key:1,type:e(a).disable===0?"primary":"danger"},{default:l(()=>[p(m(e(a).disable===0?"开启":"关闭"),1)]),_:1},8,["type"]))]),_:1}),e(s)?y("",!0):(i(),d(u,{key:3,label:"创建时间："},{default:l(()=>[p(m(e(a).create_time),1)]),_:1})),o(u,{label:"租户备注：",prop:"notes"},{default:l(()=>[e(s)?(i(),d(V,{key:0,modelValue:e(a).notes,"onUpdate:modelValue":t[8]||(t[8]=n=>e(a).notes=n),placeholder:"请输入租户备注",style:{"max-width":"250px"},type:"textarea",maxlength:100},null,8,["modelValue"])):(i(),c("span",qe,m(e(a).notes||"--"),1))]),_:1})]),_:1},8,["class","model"])]),_:1}),o(D,{lazy:"",label:"账号列表",name:"accounts"},{default:l(()=>[o(fe,{tenant_id:e(a).id},null,8,["tenant_id"])]),_:1}),o(D,{lazy:"",label:"用户列表",name:"users"},{default:l(()=>[o(ce,{tenant_id:e(a).id},null,8,["tenant_id"])]),_:1})]),_:1},8,["modelValue"])])),[[W,e(w)]])]),_:1},8,["modelValue"])}}}),Lt=pe(Fe,[["__scopeId","data-v-a8d2048d"]]);export{Lt as default};
