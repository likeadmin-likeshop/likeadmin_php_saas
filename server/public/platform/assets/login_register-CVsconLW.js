import{_ as q}from"./index-geQbQ5Vd.js";import{F as C,a2 as D,C as B,f as U,G as F,h as R,D as S}from"./element-plus-DYHMmEbd.js";import{g as L,s as N}from"./user-BGmFRCF-.js";import{d as y,r as P,Z as b,an as W,o as w,c as G,V as l,M as r,a as t,u as i,S as a,T as _,O as T,L as j}from"./@vue-pHjCrgw6.js";import"./index-CR4R7Ze_.js";import"./nprogress-sDkjjtif.js";import"./axios-CJlJSG1h.js";import"./vue-router-CoNqKBK4.js";import"./pinia-CJRVDLHa.js";import"./lodash-CSq-IaWf.js";import"./@vueuse-YJSHNXWG.js";import"./css-color-function-DEEjFEOq.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./balanced-match-D4yLO45F.js";import"./ms-CzQ2E3wO.js";import"./@element-plus-NId5miUe.js";import"./vue-clipboard3-BlHxVXLb.js";import"./clipboard-CfUngHJy.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-kkhpHHq8.js";import"./@highlightjs-DIPqHoKm.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./dayjs--xHAjlqv.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";const A={class:"login-register"},I={class:"mt-1 ml-2"},M={class:"mt-1 ml-2"},O={class:"mt-1 ml-2"},Z={href:"https://open.weixin.qq.com/",target:"_blank"},z=y({name:"loginRegister"}),Ce=y({...z,setup(H){const d=P(),o=b({login_way:[],coerce_mobile:0,login_agreement:0,third_auth:0,wechat_auth:0,qq_auth:0}),V=b({loginWay:[{required:!0,validator:(s,e,m)=>{if(o.login_way.join("").length===0)m(new Error("登录方式至少选择一项！"));else{if(o.login_way!==""){if(!d.value)return;d.value.validateField("checkPass",()=>null)}m()}},trigger:"change"}],coerce_mobile:[{required:!0,trigger:"blur"}],login_agreement:[{required:!0,trigger:"blur"}],third_auth:[{required:!0,trigger:"blur"}]}),f=async()=>{try{const s=await L();for(const e in o)o[e]=s[e]}catch(s){console.log("获取=>",s)}},k=async()=>{var s;await((s=d.value)==null?void 0:s.validate());try{await N(o),f()}catch(e){console.log("保存=>",e)}};return f(),(s,e)=>{const m=C,g=D,u=B,p=U,v=F,c=R,h=S,x=q,E=W("perms");return w(),G("div",A,[l(h,{ref_key:"formRef",ref:d,rules:i(V),model:i(o),"label-width":"120px"},{default:r(()=>[l(v,{shadow:"never",class:"!border-none"},{default:r(()=>[e[10]||(e[10]=t("div",{class:"font-medium mb-7"},"通用设置",-1)),l(u,{label:"登录方式",prop:"login_way"},{default:r(()=>[t("div",null,[l(g,{modelValue:i(o).login_way,"onUpdate:modelValue":e[0]||(e[0]=n=>i(o).login_way=n)},{default:r(()=>[l(m,{label:"1"},{default:r(()=>e[5]||(e[5]=[a("账号密码登录")])),_:1}),l(m,{label:"2"},{default:r(()=>e[6]||(e[6]=[a("手机验证码登录")])),_:1})]),_:1},8,["modelValue"]),e[7]||(e[7]=t("div",{class:"form-tips"},"系统通用登录方式，至少选择一项",-1))])]),_:1}),l(u,{label:"强制绑定手机",prop:"coerce_mobile"},{default:r(()=>[t("div",null,[l(p,{modelValue:i(o).coerce_mobile,"onUpdate:modelValue":e[1]||(e[1]=n=>i(o).coerce_mobile=n),"active-value":1,"inactive-value":0},null,8,["modelValue"]),t("span",I,_(i(o).coerce_mobile?"开启":"关闭"),1),e[8]||(e[8]=t("div",{class:"form-tips"},[a(" 1、如果开启，则新用户在注册完成之后要强制绑定手机号"),t("br"),a(" 2、老用户登录时如果检测到没有绑定手机，则要重新绑定手机号 ")],-1))])]),_:1}),l(u,{label:"政策协议",prop:"login_agreement"},{default:r(()=>[t("div",null,[l(p,{modelValue:i(o).login_agreement,"onUpdate:modelValue":e[2]||(e[2]=n=>i(o).login_agreement=n),"active-value":1,"inactive-value":0},null,8,["modelValue"]),t("span",M,_(i(o).login_agreement?"开启":"关闭"),1),e[9]||(e[9]=t("div",{class:"form-tips"},"登录/注册会员时，是否显示服务协议和隐私政策",-1))])]),_:1})]),_:1}),l(v,{shadow:"never",class:"!border-none mt-4"},{default:r(()=>[e[15]||(e[15]=t("div",{class:"font-medium mb-7"},"第三方设置",-1)),l(u,{label:"第三方登录",prop:"third_auth"},{default:r(()=>[t("div",null,[l(p,{modelValue:i(o).third_auth,"onUpdate:modelValue":e[3]||(e[3]=n=>i(o).third_auth=n),"active-value":1,"inactive-value":0},null,8,["modelValue"]),t("span",O,_(i(o).third_auth?"开启":"关闭"),1),e[12]||(e[12]=t("div",{class:"form-tips"},"登录时支持第三方登录，新用户授权即自动注册账号",-1)),t("div",null,[l(m,{modelValue:i(o).wechat_auth,"onUpdate:modelValue":e[4]||(e[4]=n=>i(o).wechat_auth=n),"true-label":1,"false-label":0},{default:r(()=>e[11]||(e[11]=[a(" 微信登录 ")])),_:1},8,["modelValue"])])])]),_:1}),l(u,{label:"微信开放平台"},{default:r(()=>[t("div",null,[t("a",Z,[l(c,{type:"primary",link:"",class:"underline"},{default:r(()=>e[13]||(e[13]=[a(" 前往微信开放平台 ")])),_:1})]),e[14]||(e[14]=t("div",{class:"form-tips"},[a(" 1、在各渠道使用微信授权登录时，强烈建议配置微信开放平台"),t("br"),a(" 2、微信开放平台关联公众号、小程序和APP后，可实现各端用户账号统一，识别买家唯一微信身份"),t("br"),a(" 3、没有配置微信开放平台，同一微信号会生成多个用户，配置微信开放平台后已生成的用户账号无法合并 ")],-1))])]),_:1})]),_:1})]),_:1},8,["rules","model"]),T((w(),j(x,null,{default:r(()=>[l(c,{type:"primary",onClick:k},{default:r(()=>e[16]||(e[16]=[a("保存")])),_:1})]),_:1})),[[E,["setting.user.user/setRegisterConfig"]]])])}}});export{Ce as default};
