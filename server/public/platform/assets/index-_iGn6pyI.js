import{A as J,B as Q,g as W,C as X,G as Y,H as ee,p as te,R as oe,d as ne,m as ae,n as re,o as le,K as ie,O as se}from"./element-plus-CSiqOtzA.js";import{_ as me}from"./index.vue_vue_type_script_setup_true_lang-ggB8NA6X.js";import{a as pe,B as R,f as de,b as _e}from"./index-BLFkyHrh.js";import{_ as ue}from"./index.vue_vue_type_script_setup_true_lang-BqTBV1YT.js";import{_ as fe}from"./index.vue_vue_type_script_setup_true_lang-B2T1NVEp.js";import{d as B,Z as ce,a4 as ke,ah as be,an as ge,o as u,c as ve,V as e,M as o,u as n,ab as ye,S as p,a as d,O as C,L as g,T,R as V,i as Ce}from"./@vue-TMcuEboY.js";import{j as $,k as we}from"./consumer-D0W1zJ4A.js";import{u as Ee}from"./usePaging-DFi_nJOG.js";import{u as D}from"./getExposeType-C5XerQxt.js";import he from"./add-DuYKfJu3.js";import xe from"./edit-Bm97PINs.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-CZY6S6gL.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-DE_336rM.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";import"./index-DIyEQYhO.js";import"./picker-BDq596hT.js";import"./index-3eVvV7l_.js";import"./index-8uzBEqkA.js";import"./vue3-video-play-xg7gp0Bu.js";import"./vuedraggable-OYPBN08G.js";import"./vue-CHxGqOme.js";import"./sortablejs-DdgKbxid.js";import"./useLockFn-BhPLnZje.js";import"./index.vue_vue_type_script_setup_true_lang-SQbB3T9k.js";import"./edit.vue_vue_type_script_setup_true_lang-BmirWZ1T.js";import"./department-DPKZthPH.js";import"./post-qzeAzStV.js";import"./role-D9GaNslj.js";import"./useDictOptions-CCfz5zC6.js";import"./index.vue_vue_type_script_setup_true_lang-DigoYPzJ.js";import"./detail-CWadMHhi.js";const P=v=>{const c=pe().perms,r="*";if(v.length>0){let l=!0;return v.forEach(i=>{!c.includes(i)&&!c.includes(r)&&(l=!1)}),l}else return!0},Re={class:"flex items-center gap-2"},Te={class:"flex items-center"},Ve=["href"],$e=["href"],De=["href"],Pe={class:"flex justify-end mt-4"},Be=B({name:"consumerLists"}),zt=B({...Be,setup(v){const f=D(),c=D(),r=ce({keyword:"",channel:"",create_time_start:"",create_time_end:""}),{pager:l,getLists:i,resetPage:w,resetParams:S}=Ee({fetchFun:$,params:r});ke(()=>{i()});const U=async E=>{await de.confirm("确定要删除？"),await we({id:E}),i()};return i(),(E,t)=>{const z=J,y=Q,H=fe,k=W,L=ue,A=X,h=Y,I=_e,s=ee,K=te,N=oe,F=be("arrow-down"),j=ne,b=ae,M=re,O=le,q=ie,G=me,x=ge("perms"),Z=se;return u(),ve("div",null,[e(h,{class:"!border-none",shadow:"never"},{default:o(()=>[e(A,{ref:"formRef",class:"mb-[-16px]",model:n(r),inline:!0},{default:o(()=>[e(y,{label:"租户信息"},{default:o(()=>[e(z,{class:"w-[280px]",modelValue:n(r).keyword,"onUpdate:modelValue":t[0]||(t[0]=a=>n(r).keyword=a),placeholder:"租户名/编号/联系方式/域名别名",clearable:"",onKeyup:ye(n(w),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(y,{label:"创建时间"},{default:o(()=>[e(H,{startTime:n(r).create_time_start,"onUpdate:startTime":t[1]||(t[1]=a=>n(r).create_time_start=a),endTime:n(r).create_time_end,"onUpdate:endTime":t[2]||(t[2]=a=>n(r).create_time_end=a)},null,8,["startTime","endTime"])]),_:1}),e(y,null,{default:o(()=>[e(k,{type:"primary",onClick:n(w)},{default:o(()=>t[7]||(t[7]=[p("查询")])),_:1},8,["onClick"]),e(k,{onClick:n(S)},{default:o(()=>t[8]||(t[8]=[p("重置")])),_:1},8,["onClick"]),e(L,{class:"ml-2.5","fetch-fun":n($),params:n(r),"page-size":n(l).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),e(h,{class:"!border-none mt-4",shadow:"never"},{default:o(()=>[d("div",null,[C((u(),g(k,{type:"primary",onClick:t[3]||(t[3]=a=>{var _;return(_=n(c))==null?void 0:_.openHandle()})},{icon:o(()=>[e(I,{name:"el-icon-Plus"})]),default:o(()=>[t[9]||(t[9]=p(" 新增 "))]),_:1})),[[x,["tenant.tenant/add"]]])]),C((u(),g(q,{class:"mt-4",size:"large",data:n(l).lists},{default:o(()=>[e(s,{label:"编号",prop:"sn",width:"120"}),e(s,{label:"头像",width:"90",align:"center"},{default:o(({row:a})=>[e(K,{src:a.avatar,size:50},null,8,["src"])]),_:1}),e(s,{label:"租户名称",prop:"name","min-width":"200"}),e(s,{label:"联系方式",prop:"tel","min-width":"150"}),e(s,{label:"用户数量",prop:"users_count","min-width":"100"},{default:o(({row:a})=>[e(k,{type:"primary",link:"",onClick:_=>{var m;return(m=n(f))==null?void 0:m.openHandle(a.id,!1,"users")}},{default:o(()=>[p(T(a.users_count),1)]),_:2},1032,["onClick"])]),_:1}),e(s,{label:"状态","min-width":"80"},{default:o(({row:a})=>[e(N,{type:a.disable===0?"primary":"info"},{default:o(()=>[p(T(a.disable===0?"开启":"关闭"),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"创建时间",prop:"create_time","min-width":"200"}),e(s,{label:"操作",width:"120",fixed:"right"},{default:o(({row:a})=>[d("div",Re,[C((u(),g(k,{type:"primary",link:"",onClick:_=>{var m;return(m=n(f))==null?void 0:m.openHandle(a.id)}},{default:o(()=>t[10]||(t[10]=[p(" 详情 ")])),_:2},1032,["onClick"])),[[x,["tenant.tenant/detail"]]]),e(O,null,{dropdown:o(()=>[e(M,null,{default:o(()=>[n(P)(["tenant.tenant/edit"])?(u(),g(b,{key:0,onClick:_=>{var m;return(m=n(f))==null?void 0:m.openHandle(a.id,!0)}},{default:o(()=>t[12]||(t[12]=[p(" 编辑 ")])),_:2},1032,["onClick"])):V("",!0),e(b,null,{default:o(()=>[d("a",{href:a.domain,target:"_blank"},"进入后台",8,Ve)]),_:2},1024),e(b,null,{default:o(()=>[d("a",{href:n(R)(a.domain,"/admin/","/pc/"),target:"_blank"},"进入前台PC",8,$e)]),_:2},1024),e(b,null,{default:o(()=>[d("a",{href:n(R)(a.domain,"/admin/","/mobile/"),target:"_blank"},"进入移动端",8,De)]),_:2},1024),n(P)(["tenant.tenant/delete"])?(u(),g(b,{key:1,divided:"",onClick:_=>U(a.id)},{default:o(()=>t[13]||(t[13]=[d("span",{class:"text-danger"}," 删除 ",-1)])),_:2},1032,["onClick"])):V("",!0)]),_:2},1024)]),default:o(()=>[d("span",Te,[t[11]||(t[11]=p(" 更多 ")),e(j,null,{default:o(()=>[e(F)]),_:1})])]),_:2},1024)])]),_:1})]),_:1},8,["data"])),[[Z,n(l).loading]]),d("div",Pe,[e(G,{modelValue:n(l),"onUpdate:modelValue":t[4]||(t[4]=a=>Ce(l)?l.value=a:null),onChange:n(i)},null,8,["modelValue","onChange"])])]),_:1}),e(xe,{ref_key:"editRef",ref:f,onRefresh:t[5]||(t[5]=a=>n(i)())},null,512),e(he,{ref_key:"addRef",ref:c,onRefresh:t[6]||(t[6]=a=>n(i)())},null,512)])}}});export{zt as default};
