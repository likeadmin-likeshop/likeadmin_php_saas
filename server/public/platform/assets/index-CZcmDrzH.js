import{A as H,B as J,I as Z,J as q,g as Q,C as W,G as X,H as Y,p as ee,e as te,K as oe,O as ae}from"./element-plus-CSiqOtzA.js";import{_ as le}from"./index.vue_vue_type_script_setup_true_lang-ggB8NA6X.js";import{f as ne,b as ie}from"./index-BLFkyHrh.js";import{_ as se}from"./index.vue_vue_type_script_setup_true_lang-BqTBV1YT.js";import{d as B,s as me,Z as re,r as pe,f as de,an as ue,o as s,c as E,V as e,M as l,u as a,ab as x,U as ce,aa as _e,L as r,S as u,O as b,a as D,R as k,i as fe,n as $}from"./@vue-TMcuEboY.js";import{a as U,_ as be,b as ve,c as we}from"./edit.vue_vue_type_script_setup_true_lang-DQiR-nKy.js";import{r as ge}from"./role-D9GaNslj.js";import{u as he}from"./useDictOptions-CCfz5zC6.js";import{u as ye}from"./usePaging-DFi_nJOG.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-CZY6S6gL.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-DE_336rM.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";import"./index-DIyEQYhO.js";import"./picker-BDq596hT.js";import"./index-3eVvV7l_.js";import"./index-8uzBEqkA.js";import"./vue3-video-play-xg7gp0Bu.js";import"./vuedraggable-OYPBN08G.js";import"./vue-CHxGqOme.js";import"./sortablejs-DdgKbxid.js";import"./department-DPKZthPH.js";import"./post-qzeAzStV.js";const ke={class:"admin"},Ve={class:"mt-4"},Ce={class:"flex mt-4 justify-end"},Ee=B({name:"admin"}),ht=B({...Ee,setup(xe){const v=me(),m=re({account:"",name:"",role_id:""}),w=pe(!1),{pager:p,getLists:c,resetParams:K,resetPage:y}=ye({fetchFun:U,params:m}),S=n=>{ve({id:n.id,avatar:n.avatar,account:n.account,name:n.name,role_id:n.role_id,job_id:n.job_id,dept_id:n.dept_id,disable:n.disable,multipoint_login:n.multipoint_login}).finally(()=>{c()})},z=async()=>{var n;w.value=!0,await $(),(n=v.value)==null||n.open("add")},F=async n=>{var t,_;w.value=!0,await $(),(t=v.value)==null||t.open("edit"),(_=v.value)==null||_.setFormData(n)},I=async n=>{await ne.confirm("确定要删除？"),await we({id:n}),c()},{optionsData:L}=he({role:{api:ge}});return de(()=>{c()}),(n,t)=>{const _=H,g=J,V=Z,P=q,f=Q,R=se,A=W,C=X,N=ie,i=Y,O=ee,T=te,j=oe,M=le,h=ue("perms"),G=ae;return s(),E("div",ke,[e(C,{class:"!border-none",shadow:"never"},{default:l(()=>[e(A,{class:"mb-[-16px]",model:a(m),inline:""},{default:l(()=>[e(g,{label:"管理员账号"},{default:l(()=>[e(_,{modelValue:a(m).account,"onUpdate:modelValue":t[0]||(t[0]=o=>a(m).account=o),class:"w-[280px]",clearable:"",onKeyup:x(a(y),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,{label:"管理员名称"},{default:l(()=>[e(_,{modelValue:a(m).name,"onUpdate:modelValue":t[1]||(t[1]=o=>a(m).name=o),class:"w-[280px]",clearable:"",onKeyup:x(a(y),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(g,{label:"管理员角色",class:"w-[280px]"},{default:l(()=>[e(P,{modelValue:a(m).role_id,"onUpdate:modelValue":t[2]||(t[2]=o=>a(m).role_id=o)},{default:l(()=>[e(V,{label:"全部",value:""}),(s(!0),E(ce,null,_e(a(L).role,(o,d)=>(s(),r(V,{key:d,label:o.name,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(g,null,{default:l(()=>[e(f,{type:"primary",onClick:a(y)},{default:l(()=>t[5]||(t[5]=[u("查询")])),_:1},8,["onClick"]),e(f,{onClick:a(K)},{default:l(()=>t[6]||(t[6]=[u("重置")])),_:1},8,["onClick"]),e(R,{class:"ml-2.5","fetch-fun":a(U),params:a(m),"page-size":a(p).size},null,8,["fetch-fun","params","page-size"])]),_:1})]),_:1},8,["model"])]),_:1}),b((s(),r(C,{class:"mt-4 !border-none",shadow:"never"},{default:l(()=>[b((s(),r(f,{type:"primary",onClick:z},{icon:l(()=>[e(N,{name:"el-icon-Plus"})]),default:l(()=>[t[7]||(t[7]=u(" 新增 "))]),_:1})),[[h,["auth.admin/add"]]]),D("div",Ve,[e(j,{data:a(p).lists,size:"large"},{default:l(()=>[e(i,{label:"ID",prop:"id","min-width":"60"}),t[10]||(t[10]=u("> ")),e(i,{label:"头像","min-width":"100"},{default:l(({row:o})=>[e(O,{size:50,src:o.avatar},null,8,["src"])]),_:1}),e(i,{label:"账号",prop:"account","min-width":"100"}),e(i,{label:"名称",prop:"name","min-width":"100"}),e(i,{label:"角色",prop:"role_name","min-width":"100","show-tooltip-when-overflow":""}),e(i,{label:"部门",prop:"dept_name","min-width":"100","show-tooltip-when-overflow":""}),e(i,{label:"创建时间",prop:"create_time","min-width":"180"}),e(i,{label:"最近登录时间",prop:"login_time","min-width":"180"}),e(i,{label:"最近登录IP",prop:"login_ip","min-width":"120"}),b((s(),r(i,{label:"状态","min-width":"100"},{default:l(({row:o})=>[o.root!=1?(s(),r(T,{key:0,modelValue:o.disable,"onUpdate:modelValue":d=>o.disable=d,"active-value":0,"inactive-value":1,onChange:d=>S(o)},null,8,["modelValue","onUpdate:modelValue","onChange"])):k("",!0)]),_:1})),[[h,["auth.admin/edit"]]]),e(i,{label:"操作",width:"120",fixed:"right"},{default:l(({row:o})=>[b((s(),r(f,{type:"primary",link:"",onClick:d=>F(o)},{default:l(()=>t[8]||(t[8]=[u(" 编辑 ")])),_:2},1032,["onClick"])),[[h,["auth.admin/edit"]]]),o.root!=1?b((s(),r(f,{key:0,type:"danger",link:"",onClick:d=>I(o.id)},{default:l(()=>t[9]||(t[9]=[u(" 删除 ")])),_:2},1032,["onClick"])),[[h,["auth.admin/delete"]]]):k("",!0)]),_:1})]),_:1},8,["data"])]),D("div",Ce,[e(M,{modelValue:a(p),"onUpdate:modelValue":t[3]||(t[3]=o=>fe(p)?p.value=o:null),onChange:a(c)},null,8,["modelValue","onChange"])])]),_:1})),[[G,a(p).loading]]),a(w)?(s(),r(be,{key:0,ref_key:"editRef",ref:v,onSuccess:a(c),onClose:t[4]||(t[4]=o=>w.value=!1)},null,8,["onSuccess"])):k("",!0)])}}});export{ht as default};
