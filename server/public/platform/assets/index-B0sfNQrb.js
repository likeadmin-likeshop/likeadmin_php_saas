import{F as J,I as M,J as Z,B as Q,A as W,g as X,C as Y,G as ee,H as te,R as ae,K as oe,O as le}from"./element-plus-CSiqOtzA.js";import{_ as ne}from"./index.vue_vue_type_script_setup_true_lang-ggB8NA6X.js";import{f as se,b as ie}from"./index-VCXt8Qva.js";import{d as h,r as B,s as de,Z as F,an as re,o as i,c as V,V as t,M as a,u as l,U as pe,aa as me,L as c,ab as ue,S as p,a as D,O as v,T as ce,i as _e,R as fe,n as S}from"./@vue-TMcuEboY.js";import{a as ye,b as ve,c as ge}from"./dict-omTGRx19.js";import{u as be}from"./usePaging-DFi_nJOG.js";import{_ as ke}from"./edit.vue_vue_type_script_setup_true_lang-YWTHbhWv.js";import{u as Ce}from"./vue-router-CZY6S6gL.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-C2WBhajb.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-DE_336rM.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";import"./index-DmpJxzQZ.js";const we={class:"dict-type"},Ve={class:"mt-4"},De={class:"flex justify-end mt-4"},Ee=h({name:"dictData"}),rt=h({...Ee,setup(xe){const{query:L}=Ce(),g=B(!1),_=de(),s=F({type:"",type_id:Number(L.id),name:"",status:""}),C=F({dict_type:[]}),{pager:f,getLists:y,resetPage:E,resetParams:P}=be({fetchFun:ge,params:s}),w=B([]),N=n=>{w.value=n.map(({id:e})=>e)},U=async()=>{var e,r;g.value=!0,await S();const n=C.dict_type.find(m=>m.id==s.type_id);(e=_.value)==null||e.setFormData({type_value:n==null?void 0:n.type,type_id:n.id}),(r=_.value)==null||r.open("add")},I=async n=>{var e,r;g.value=!0,await S(),(e=_.value)==null||e.open("edit"),(r=_.value)==null||r.setFormData(n)},x=async n=>{await se.confirm("确定要删除？"),await ye({id:n}),y()},K=async()=>{const n=await ve({page_type:0});C.dict_type=n.lists};return y(),K(),(n,e)=>{const r=J,m=M,$=Z,b=Q,O=W,u=X,q=Y,R=ee,T=ie,d=te,A=ae,H=oe,j=ne,k=re("perms"),z=le;return i(),V("div",we,[t(R,{class:"!border-none",shadow:"never"},{default:a(()=>[t(r,{class:"mb-4",content:"数据管理",onBack:e[0]||(e[0]=o=>n.$router.back())}),t(q,{ref:"formRef",class:"mb-[-16px]",model:l(s),inline:""},{default:a(()=>[t(b,{label:"字典名称",class:"w-[280px]"},{default:a(()=>[t($,{modelValue:l(s).type_id,"onUpdate:modelValue":e[1]||(e[1]=o=>l(s).type_id=o),onChange:l(y)},{default:a(()=>[(i(!0),V(pe,null,me(l(C).dict_type,o=>(i(),c(m,{label:o.name,value:o.id,key:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","onChange"])]),_:1}),t(b,{label:"数据名称"},{default:a(()=>[t(O,{class:"w-[280px]",modelValue:l(s).name,"onUpdate:modelValue":e[2]||(e[2]=o=>l(s).name=o),clearable:"",onKeyup:ue(l(E),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),t(b,{label:"数据状态",class:"w-[280px]"},{default:a(()=>[t($,{modelValue:l(s).status,"onUpdate:modelValue":e[3]||(e[3]=o=>l(s).status=o)},{default:a(()=>[t(m,{label:"全部",value:""}),t(m,{label:"正常",value:1}),t(m,{label:"停用",value:0})]),_:1},8,["modelValue"])]),_:1}),t(b,null,{default:a(()=>[t(u,{type:"primary",onClick:l(E)},{default:a(()=>e[7]||(e[7]=[p("查询")])),_:1},8,["onClick"]),t(u,{onClick:l(P)},{default:a(()=>e[8]||(e[8]=[p("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),t(R,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[D("div",null,[v((i(),c(u,{type:"primary",onClick:U},{icon:a(()=>[t(T,{name:"el-icon-Plus"})]),default:a(()=>[e[9]||(e[9]=p(" 添加数据 "))]),_:1})),[[k,["setting.dict.dict_data/add"]]]),v((i(),c(u,{disabled:!l(w).length,type:"danger",onClick:e[4]||(e[4]=o=>x(l(w)))},{icon:a(()=>[t(T,{name:"el-icon-Delete"})]),default:a(()=>[e[10]||(e[10]=p(" 删除 "))]),_:1},8,["disabled"])),[[k,["setting.dict.dict_data/delete"]]])]),v((i(),V("div",Ve,[D("div",null,[t(H,{data:l(f).lists,size:"large",onSelectionChange:N},{default:a(()=>[t(d,{type:"selection",width:"55"}),t(d,{label:"ID",prop:"id"}),t(d,{label:"数据名称",prop:"name","min-width":"120"}),t(d,{label:"数据值",prop:"value","min-width":"120"}),t(d,{label:"状态"},{default:a(({row:o})=>[t(A,{type:o.status==1?"primary":"danger"},{default:a(()=>[p(ce(o.status==1?"正常":"停用"),1)]),_:2},1032,["type"])]),_:1}),t(d,{label:"备注",prop:"remark","min-width":"120","show-tooltip-when-overflow":""}),t(d,{label:"排序",prop:"sort"}),t(d,{label:"操作",width:"120",fixed:"right"},{default:a(({row:o})=>[v((i(),c(u,{link:"",type:"primary",onClick:G=>I(o)},{default:a(()=>e[11]||(e[11]=[p(" 编辑 ")])),_:2},1032,["onClick"])),[[k,["setting.dict.dict_data/edit"]]]),v((i(),c(u,{link:"",type:"danger",onClick:G=>x(o.id)},{default:a(()=>e[12]||(e[12]=[p(" 删除 ")])),_:2},1032,["onClick"])),[[k,["setting.dict.dict_data/delete"]]])]),_:1})]),_:1},8,["data"])]),D("div",De,[t(j,{modelValue:l(f),"onUpdate:modelValue":e[5]||(e[5]=o=>_e(f)?f.value=o:null),onChange:l(y)},null,8,["modelValue","onChange"])])])),[[z,l(f).loading]])]),_:1}),l(g)?(i(),c(ke,{key:0,ref_key:"editRef",ref:_,onSuccess:l(y),onClose:e[6]||(e[6]=o=>g.value=!1)},null,8,["onSuccess"])):fe("",!0)])}}});export{rt as default};
