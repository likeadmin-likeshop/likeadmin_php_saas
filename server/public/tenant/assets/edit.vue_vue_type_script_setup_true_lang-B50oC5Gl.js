import{G as N,C as B,B as F,H as S,g as T,D as G}from"./element-plus-B9ALq7eR.js";import{_ as H}from"./picker-DcTIrUSt.js";import{s as K,g as M}from"./pay-giJoOZ39.js";import{P as Z}from"./index-BlkbY60M.js";import{d as j,s as k,b as z,Z as J,o as g,c as y,V as l,M as i,u as a,S as u,T as L,a as n,U as b,R as x}from"./@vue-TMcuEboY.js";const O={class:"edit-popup"},Q={class:"flex-1"},W={class:"flex-1"},X={class:"flex-1"},Y={class:"flex-1"},te=j({__name:"edit",emits:["success","close"],setup($,{expose:w,emit:U}){const V=U,c=k(),_=k(),m=z(()=>{switch(o.pay_way){case 1:return"余额支付";case 2:return"微信支付";case 3:return"支付宝支付";default:return""}}),o=J({id:"",pay_way:0,name:"",icon:"",sort:0,remark:"",domain:"",config:{interface_version:"",merchant_type:"",mch_id:"",pay_sign_key:"",apiclient_cert:"",apiclient_key:"",mode:"",app_id:"",private_key:"",ali_public_key:""}}),I={name:[{required:!0,message:"请输入显示名称"}],"config.mch_id":[{required:!0,message:"请输入微信支付商户号"}],"config.pay_sign_key":[{required:!0,message:"请输入微信支付商户API密钥"}],"config.apiclient_cert":[{required:!0,message:"请输入微信支付证书"}],"config.apiclient_key":[{required:!0,message:"请输入微信支付证书密钥"}],"config.app_id":[{required:!0,message:"请输入支付宝应用ID"}],"config.private_key":[{required:!0,message:"请输入支付宝应用私钥"}],"config.ali_public_key":[{required:!0,message:"请输入支付宝公钥"}]},C=async()=>{var p,e;await((p=c.value)==null?void 0:p.validate()),await K(o),(e=_.value)==null||e.close(),V("success")},P=()=>{var p;(p=_.value)==null||p.open()},v=p=>{for(const e in o)p[e]!=null&&p[e]!=null&&(o[e]=p[e])},D=async p=>{const e=await M({id:p.id});v(e)},R=()=>{V("close")};return w({open:P,setFormData:v,getDetail:D}),(p,e)=>{const r=N,s=B,d=F,q=H,f=S,E=T,A=G;return g(),y("div",O,[l(Z,{ref_key:"popupRef",ref:_,title:a(m),async:!0,width:"550px",onConfirm:C,onClose:R},{default:i(()=>[l(A,{ref_key:"formRef",ref:c,model:a(o),"label-width":"84px",rules:I},{default:i(()=>[l(s,{label:"支付方式"},{default:i(()=>[l(r,{value:a(m),"model-value":a(m)},{default:i(()=>[u(L(a(m)),1)]),_:1},8,["value","model-value"])]),_:1}),l(s,{label:"显示名称",prop:"name"},{default:i(()=>[l(d,{modelValue:a(o).name,"onUpdate:modelValue":e[0]||(e[0]=t=>a(o).name=t),placeholder:"请输入显示名称"},null,8,["modelValue"])]),_:1}),l(s,{label:"显示图标",prop:"image"},{default:i(()=>[n("div",null,[l(q,{limit:1,disabled:!1,modelValue:a(o).icon,"onUpdate:modelValue":e[1]||(e[1]=t=>a(o).icon=t)},null,8,["modelValue"]),e[14]||(e[14]=n("span",{class:"form-tips"},"建议尺寸：200*200px",-1))])]),_:1}),a(o).pay_way==2?(g(),y(b,{key:0},[l(s,{prop:"config.interface_version",label:"微信支付接口版本"},{default:i(()=>[n("div",null,[l(f,{modelValue:a(o).config.interface_version,"onUpdate:modelValue":e[2]||(e[2]=t=>a(o).config.interface_version=t)},{default:i(()=>[l(r,{value:"v3"},{default:i(()=>e[15]||(e[15]=[u("V3")])),_:1})]),_:1},8,["modelValue"]),e[16]||(e[16]=n("div",{class:"form-tips"},"暂时只支持V3版本",-1))])]),_:1}),l(s,{label:"商户类型",prop:"config.merchant_type"},{default:i(()=>[n("div",null,[l(f,{modelValue:a(o).config.merchant_type,"onUpdate:modelValue":e[3]||(e[3]=t=>a(o).config.merchant_type=t)},{default:i(()=>[l(r,{value:"ordinary_merchant"},{default:i(()=>e[17]||(e[17]=[u("普通商户")])),_:1})]),_:1},8,["modelValue"]),e[18]||(e[18]=n("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1))])]),_:1}),l(s,{label:"微信支付商户号",prop:"config.mch_id"},{default:i(()=>[n("div",Q,[l(d,{modelValue:a(o).config.mch_id,"onUpdate:modelValue":e[4]||(e[4]=t=>a(o).config.mch_id=t),placeholder:"请输入微信支付商户号"},null,8,["modelValue"]),e[19]||(e[19]=n("div",{class:"form-tips"},"微信支付商户号（MCHID）",-1))])]),_:1}),l(s,{label:"商户API密钥",prop:"config.pay_sign_key"},{default:i(()=>[l(d,{modelValue:a(o).config.pay_sign_key,"onUpdate:modelValue":e[5]||(e[5]=t=>a(o).config.pay_sign_key=t),placeholder:"请输入微信支付商户API密钥"},null,8,["modelValue"]),e[20]||(e[20]=n("span",{class:"form-tips"},"微信支付商户API密钥（paySignKey）",-1))]),_:1}),l(s,{label:"微信支付证书",prop:"config.apiclient_cert"},{default:i(()=>[l(d,{type:"textarea",rows:3,modelValue:a(o).config.apiclient_cert,"onUpdate:modelValue":e[6]||(e[6]=t=>a(o).config.apiclient_cert=t),placeholder:"请输入微信支付证书"},null,8,["modelValue"]),e[21]||(e[21]=n("span",{class:"form-tips"}," 微信支付证书（apiclient_cert.pem），前往微信商家平台生成并黏贴至此处 ",-1))]),_:1}),l(s,{label:"微信支付证书密钥",prop:"config.apiclient_key"},{default:i(()=>[l(d,{type:"textarea",rows:3,modelValue:a(o).config.apiclient_key,"onUpdate:modelValue":e[7]||(e[7]=t=>a(o).config.apiclient_key=t),placeholder:"请输入微信支付证书密钥"},null,8,["modelValue"]),e[22]||(e[22]=n("span",{class:"form-tips"}," 微信支付证书密钥（apiclient_key.pem），前往微信商家平台生成并黏贴至此处 ",-1))]),_:1}),l(s,{label:"支付授权目录"},{default:i(()=>e[23]||(e[23]=[n("div",null,[n("div",null,[n("span",{class:"mr-[20px]"},"https://前台手机域名地址/")])],-1)])),_:1})],64)):x("",!0),a(o).pay_way==3?(g(),y(b,{key:1},[l(s,{label:"模式",prop:"config.mode"},{default:i(()=>[n("div",null,[l(f,{modelValue:a(o).config.mode,"onUpdate:modelValue":e[8]||(e[8]=t=>a(o).config.mode=t)},{default:i(()=>[l(r,{value:"normal_mode"},{default:i(()=>e[24]||(e[24]=[u("普通模式")])),_:1})]),_:1},8,["modelValue"]),e[25]||(e[25]=n("div",{class:"form-tips"},"暂时仅支持支付宝普通模式",-1))])]),_:1}),l(s,{label:"商户类型",prop:"config.merchant_type"},{default:i(()=>[n("div",null,[l(f,{modelValue:a(o).config.merchant_type,"onUpdate:modelValue":e[9]||(e[9]=t=>a(o).config.merchant_type=t)},{default:i(()=>[l(r,{value:"ordinary_merchant"},{default:i(()=>e[26]||(e[26]=[u("普通商户")])),_:1})]),_:1},8,["modelValue"]),e[27]||(e[27]=n("div",{class:"form-tips"}," 暂时只支持普通商户类型，服务商户类型模式暂不支持 ",-1))])]),_:1}),l(s,{label:"应用ID",prop:"config.app_id"},{default:i(()=>[n("div",W,[l(d,{modelValue:a(o).config.app_id,"onUpdate:modelValue":e[10]||(e[10]=t=>a(o).config.app_id=t),placeholder:"请输入支付宝应用ID"},null,8,["modelValue"]),e[28]||(e[28]=n("span",{class:"form-tips"}," 支付宝应用APP_ID ",-1))])]),_:1}),l(s,{label:"应用私钥",prop:"config.private_key"},{default:i(()=>[n("div",X,[l(d,{type:"textarea",rows:3,modelValue:a(o).config.private_key,"onUpdate:modelValue":e[11]||(e[11]=t=>a(o).config.private_key=t),placeholder:"请输入支付宝应用私钥"},null,8,["modelValue"]),e[29]||(e[29]=n("span",{class:"form-tips"},"支付宝应用私钥（private_key） ",-1))])]),_:1}),l(s,{label:"支付宝公钥",prop:"config.ali_public_key"},{default:i(()=>[n("div",Y,[l(d,{type:"textarea",rows:3,modelValue:a(o).config.ali_public_key,"onUpdate:modelValue":e[12]||(e[12]=t=>a(o).config.ali_public_key=t),placeholder:"请输入支付宝公钥"},null,8,["modelValue"]),e[30]||(e[30]=n("span",{class:"form-tips"},"支付宝公钥（alipayCertPublicKey） ",-1))])]),_:1})],64)):x("",!0),l(s,{label:"排序",prop:"sort"},{default:i(()=>[n("div",null,[l(E,{modelValue:a(o).sort,"onUpdate:modelValue":e[13]||(e[13]=t=>a(o).sort=t),min:0,max:9999},null,8,["modelValue"]),e[31]||(e[31]=n("div",{class:"form-tips"},"默认为0， 数值越大越排前",-1))])]),_:1})]),_:1},8,["model"])]),_:1},8,["title"])])}}});export{te as _};
