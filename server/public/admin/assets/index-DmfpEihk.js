import{B as A,C as M,O as j,P as z,h as Z,D as G,I as H,K as J,f as Q,L as W,M as X}from"./element-plus-B9ALq7eR.js";import{_ as Y}from"./index.vue_vue_type_script_setup_true_lang-B-ov7tNf.js";import{a as ee,g as P,f as te,b as ae,_ as le}from"./index-B7D3XScF.js";import{d as L,Z as oe,a4 as ie,ah as ne,an as re,o as r,c as S,V as e,M as a,u as o,ab as se,U as de,aa as me,L as m,S as _,a as D,O as v,R as U,i as ce}from"./@vue-TMcuEboY.js";import{h as pe,k as ue,l as _e,m as fe}from"./article-DDUwnL8k.js";import{u as be}from"./useDictOptions-DLJswef2.js";import{u as he}from"./usePaging-DFi_nJOG.js";import"./lodash-es-R-kYiKr_.js";import"./async-validator-DKvM95Vc.js";import"./@element-plus-BZaexRrS.js";import"./dayjs-CMfar2R3.js";import"./balanced-match-mNcR6oh4.js";import"./@ctrl-r5W6hzzQ.js";import"./normalize-wheel-es-B6fDCfyv.js";import"./@popperjs-D9SI2xQl.js";import"./nprogress-Cgf5DU8x.js";import"./vue-router-D4MxfuQi.js";import"./pinia-ebUeA1L2.js";import"./axios-C-n2IhIP.js";import"./lodash-BtPWuHkK.js";import"./@vueuse-BQYVjZ5N.js";import"./css-color-function-rJvg8h-6.js";import"./color-B0v57BL7.js";import"./clone-CuIhj1wH.js";import"./color-convert-BGgJB5UM.js";import"./color-name-BQ5IbGbl.js";import"./color-string-BhgG7-8u.js";import"./ms-CzQ2E3wO.js";import"./vue-clipboard3-8CNoFg4V.js";import"./clipboard-Dch_ozqB.js";import"./echarts-BR_QmBtV.js";import"./tslib-BDyQ-Jie.js";import"./zrender-B-CeXLwU.js";import"./highlight.js-D5uP1KGk.js";import"./@highlightjs-KJi31KWJ.js";const k=w=>{const s=ee().perms,d="*";if(w.length>0){let c=!0;return w.forEach(g=>{!s.includes(g)&&!s.includes(d)&&(c=!1)}),c}else return!0},ve={class:"article-lists"},we={class:"flex justify-end mt-4"},ge=L({name:"articleLists"}),at=L({...ge,setup(w){const n=oe({title:"",cid:"",is_show:""}),{pager:s,getLists:d,resetPage:c,resetParams:g}=he({fetchFun:fe,params:n}),{optionsData:B}=be({article_cate:{api:pe}}),F=async(f,l)=>{try{await ue({id:l,is_show:f}),d()}catch{d()}},I=async f=>{await te.confirm("确定要删除？"),await _e({id:f}),d()};return ie(()=>{d()}),d(),(f,l)=>{const y=A,b=M,p=j,C=z,u=Z,K=G,E=H,N=ae,x=ne("router-link"),i=J,O=le,R=Q,T=W,$=Y,V=re("perms"),q=X;return r(),S("div",ve,[e(E,{class:"!border-none",shadow:"never"},{default:a(()=>[e(K,{ref:"formRef",class:"mb-[-16px]",model:o(n),inline:!0},{default:a(()=>[e(b,{label:"文章标题"},{default:a(()=>[e(y,{class:"w-[280px]",modelValue:o(n).title,"onUpdate:modelValue":l[0]||(l[0]=t=>o(n).title=t),placeholder:"请输入文章标题",clearable:"",onKeyup:se(o(c),["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(b,{label:"栏目名称",class:"w-[280px]"},{default:a(()=>[e(C,{modelValue:o(n).cid,"onUpdate:modelValue":l[1]||(l[1]=t=>o(n).cid=t)},{default:a(()=>[e(p,{label:"全部",value:""}),(r(!0),S(de,null,me(o(B).article_cate,t=>(r(),m(p,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"文章状态",class:"w-[280px]"},{default:a(()=>[e(C,{modelValue:o(n).is_show,"onUpdate:modelValue":l[2]||(l[2]=t=>o(n).is_show=t)},{default:a(()=>[e(p,{label:"全部",value:""}),e(p,{label:"显示",value:1}),e(p,{label:"隐藏",value:0})]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:a(()=>[e(u,{type:"primary",onClick:o(c)},{default:a(()=>l[4]||(l[4]=[_("查询")])),_:1},8,["onClick"]),e(u,{onClick:o(g)},{default:a(()=>l[5]||(l[5]=[_("重置")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"])]),_:1}),e(E,{class:"!border-none mt-4",shadow:"never"},{default:a(()=>[D("div",null,[v((r(),m(x,{to:{path:o(P)("article.article/add:edit")}},{default:a(()=>[e(u,{type:"primary",class:"mb-4"},{icon:a(()=>[e(N,{name:"el-icon-Plus"})]),default:a(()=>[l[6]||(l[6]=_(" 发布文章 "))]),_:1})]),_:1},8,["to"])),[[V,["article.article/add","article.article/add:edit"]]])]),v((r(),m(T,{size:"large",data:o(s).lists},{default:a(()=>[e(i,{label:"ID",prop:"id","min-width":"80"}),e(i,{label:"封面","min-width":"100"},{default:a(({row:t})=>[t.image?(r(),m(O,{key:0,src:t.image,width:60,height:45,"preview-src-list":[t.image],"preview-teleported":"",fit:"contain"},null,8,["src","preview-src-list"])):U("",!0)]),_:1}),e(i,{label:"标题",prop:"title","min-width":"160","show-tooltip-when-overflow":""}),e(i,{label:"栏目",prop:"cate_name","min-width":"100"}),e(i,{label:"作者",prop:"author","min-width":"120"}),e(i,{label:"浏览量",prop:"click","min-width":"100"}),e(i,{label:"状态","min-width":"100"},{default:a(({row:t})=>[e(R,{disabled:!o(k)(["article.article/updateStatus"]),modelValue:t.is_show,"onUpdate:modelValue":h=>t.is_show=h,"active-value":1,"inactive-value":0,onChange:h=>F(h,t.id)},null,8,["disabled","modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(i,{label:"排序",prop:"sort","min-width":"100"}),e(i,{label:"发布时间",prop:"create_time","min-width":"120"}),o(k)(["article.article/edit","article.article/add:edit"])||o(k)(["article.article/delete"])?(r(),m(i,{key:0,label:"操作",width:"120",fixed:"right"},{default:a(({row:t})=>[v((r(),m(u,{type:"primary",link:""},{default:a(()=>[e(x,{to:{path:o(P)("article.article/add:edit"),query:{id:t.id}}},{default:a(()=>l[7]||(l[7]=[_(" 编辑 ")])),_:2},1032,["to"])]),_:2},1024)),[[V,["article.article/edit","article.article/add:edit"]]]),v((r(),m(u,{type:"danger",link:"",onClick:h=>I(t.id)},{default:a(()=>l[8]||(l[8]=[_(" 删除 ")])),_:2},1032,["onClick"])),[[V,["article.article/delete"]]])]),_:1})):U("",!0)]),_:1},8,["data"])),[[q,o(s).loading]]),D("div",we,[e($,{modelValue:o(s),"onUpdate:modelValue":l[3]||(l[3]=t=>ce(s)?s.value=t:null),onChange:o(d)},null,8,["modelValue","onChange"])])]),_:1})])}}});export{at as default};
